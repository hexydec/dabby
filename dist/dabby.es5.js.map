{"version":3,"sources":["dabby.es5.js"],"names":["global","factory","define","amd","exports","module","$","window","Array","from","arrayLike","mapFn","thisArg","arr","slice","call","map","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","prototype","Event","Element","matches","msMatchesSelector","NodeList","forEach","callback","i","length","Object","assign","defineProperty","value","target","varArgs","TypeError","to","index","arguments","nextSource","nextKey","hasOwnProperty","writable","configurable","camelise","prop","replace","text","letter","toUpperCase","dasherise","toLowerCase","filterNodes","dabby","filter","context","not","func","nodes","nodeType","isFunction","n","node","item","Boolean","getEvents","getProp","properties","getVal","val","obj","current","setCss","props","name","keys","k","remove","style","isNaN","selector","match","isWindow","readyState","addEventListener","once","indexOf","each","concat","querySelectorAll","push","createElement","attr","innerHTML","content","children","fn","len","ajax","url","settings","extend","method","cache","data","dataType","async","crossDomain","scriptCharset","jsonp","jsonpCallback","Date","now","headers","contentType","statusCode","username","password","test","sync","script","xhr","param","charset","load","error","key","response","complete","apply","src","head","appendChild","status","responseText","callbacks","JSON","parse","e","XMLHttpRequest","open","Authorization","btoa","setRequestHeader","onload","types","ontimeout","onabort","send","success","type","isFunc","getScript","split","uri","html","outerHTML","add","isArr","isArray","encodeURIComponent","join","serialize","is","disabled","getAttribute","events","on","cssText","className","textContent","removeAttribute","setAttribute","cls","substr","classList","css","isPlainObject","getComputedStyle","output","ret","getPropertyValue","temp","dataset","stringify","hasClass","contains","removeProp","multiple","String","selected","values","checked","get","offset","coords","doc","documentElement","rect","pos","getBoundingClientRect","top","left","position","parseFloat","scrollTop","scrollLeft","offsetParent","offsetLeft","offsetTop","tl","scroll","getAdditionalLength","wh","suffix","dim","valtype","io","whu","Node","DOCUMENT_NODE","trigger","t","parents","args","preventDefault","stopPropagation","capture","removeEventListener","splice","dispatchEvent","clone","cloneNode","empty","firstChild","removeChild","before","prepend","append","after","pre","elems","arg","backwards","forwards","insertAdjacentElement","insertBefore","prependTo","appendTo","insertAfter","parentNode","all","source","parent","replaceChild","start","end","unwrap","wrap","wrapAll","firstElementChild","closest","eq","find","first","has","subject","last","next","until","sibling","ELEMENT_NODE","siblings","child","arrs","merge","sources","shift","constructor","Function","getPrototypeOf","proto","toString","result"],"mappings":"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","file":"dabby.es5.js","sourcesContent":["/*! dabbyjs v0.9.5 by Will Earp - https://github.com/hexydec/dabby */\r\n\r\n(function (global, factory) {\r\n\tif (typeof define === \"function\" && define.amd) {\r\n\t\tdefine(() => factory(global));\r\n\t} else if (typeof exports !== \"undefined\") {\r\n\t\tmodule.exports = factory(global);\r\n\t} else if (!global.$) {\r\n\t\tglobal.$ = factory(global);\r\n\t}\r\n}(this || window, window => {\r\n\t\"use strict\";\r\n\r\nif (!Array.from) {\r\n\tArray.from = function (arrayLike, mapFn, thisArg) {\r\n\t\tvar arr = [].slice.call(arrayLike);\r\n\t\tif (typeof mapFn === \"function\") {\r\n\t\t\tarr = arr.map(mapFn, thisArg);\r\n\t\t}\r\n\t\treturn arr;\r\n\t};\r\n}\r\n\r\n// CustomEvent is not supported in IE11\r\nif (typeof window.CustomEvent !== \"function\") {\r\n\tfunction CustomEvent(event, params) {\r\n\t\tparams = params || {bubbles: false, cancelable: false, detail: undefined};\r\n\t\tconst evt = document.createEvent(\"CustomEvent\");\r\n\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n\t\treturn evt;\r\n\t}\r\n\r\n\tCustomEvent.prototype = window.Event.prototype;\r\n\twindow.CustomEvent = CustomEvent;\r\n}\r\n\r\n// support Element.matches() in IE and older Webkit\r\nif (!Element.prototype.matches) {\r\n    Element.prototype.matches = Element.prototype.msMatchesSelector;\r\n}\r\n\r\nif (!NodeList.prototype.forEach) {\r\n    NodeList.prototype.forEach = function (callback, thisArg) {\r\n        thisArg = thisArg || window;\r\n        for (var i = 0; i < this.length; i++) {\r\n            callback.call(thisArg, this[i], i, this);\r\n        }\r\n    };\r\n}\r\n\r\nif (typeof Object.assign !== \"function\") {\r\n\tObject.defineProperty(Object, \"assign\", {\r\n\t\tvalue: function assign(target, varArgs) { // .length of function is 2\r\n\t\t\t\"use strict\";\r\n\t\t\tif (target == null) { // TypeError if undefined or null\r\n\t\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\r\n\t\t\t}\r\n\r\n\t\t\tvar to = Object(target);\r\n\r\n\t\t\tfor (var index = 1; index < arguments.length; index++) {\r\n\t\t\t\tvar nextSource = arguments[index];\r\n\r\n\t\t\t\tif (nextSource != null) { // Skip over if undefined or null\r\n\t\t\t\t\tfor (var nextKey in nextSource) {\r\n\t\t\t\t\t\t// Avoid bugs when hasOwnProperty is shadowed\r\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n\t\t\t\t\t\t\tto[nextKey] = nextSource[nextKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn to;\r\n\t\t},\r\n\t\twritable: true,\r\n\t\tconfigurable: true\r\n\t});\r\n}\r\n\r\nfunction camelise(prop) {\r\n\treturn prop.replace(/-([a-z])/gi, (text, letter) => letter.toUpperCase());\r\n}\r\n\r\nfunction dasherise(prop) {\r\n\treturn prop.replace(/[A-Z]/g, (letter) => \"-\" + letter.toLowerCase());\r\n}\r\n\r\nfunction filterNodes(dabby, filter, context, not) {\r\n\tlet func,\r\n\t\tnodes = dabby.nodeType ? [dabby] : Array.from(dabby);\r\n\r\n\t// sort out args\r\n\tif (typeof context === \"boolean\") {\r\n\t\tnot = context;\r\n\t\tcontext = null;\r\n\t}\r\n\r\n\t// function\r\n\tif ($.isFunction(filter)) {\r\n\t\tfunc = filter;\r\n\r\n\t// nodes\r\n\t} else {\r\n\r\n\t\t// normalise filters\r\n\t\tif (typeof(filter) === \"string\") {\r\n\t\t\tfilter = [filter];\r\n\t\t} else {\r\n\t\t\tfilter = Array.from($(filter, context));\r\n\t\t}\r\n\r\n\t\t// filter function\r\n\t\tfunc = (n, node) => {\r\n\t\t\tlet i = filter.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (typeof(filter[i]) === \"string\" && node.matches ? node.matches(filter[i]) : node === filter[i]) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\t}\r\n\treturn nodes.filter((item, i) => func.call(item, i, item) !== Boolean(not), nodes);\r\n}\r\n\r\nfunction getEvents() {\r\n\treturn [\"focusin\", \"focusout\", \"focus\", \"blur\", \"resize\", \"scroll\", \"unload\", \"click\", \"dblclick\", \"mousedown\", \"mouseup\", \"mousemove\", \"mouseover\", \"mouseout\", \"mouseenter\", \"mouseleave\", \"contextmenu\", \"change\", \"select\", \"keydown\", \"keypress\", \"keyup\", \"error\", \"submit\"];\r\n}\r\n\r\nfunction getProp(prop) {\r\n\tlet properties = {\r\n\t\t\"for\": \"htmlFor\",\r\n\t\t\"class\": \"className\",\r\n\t\t\"tabindex\": \"tabIndex\",\r\n\t\t\"readonly\": \"readOnly\",\r\n\t\t\"maxlength\": \"maxLength\",\r\n\t\t\"cellspacing\": \"cellSpacing\",\r\n\t\t\"cellpadding\": \"cellPadding\",\r\n\t\t\"rowspan\": \"rowSpan\",\r\n\t\t\"colspan\": \"colSpan\",\r\n\t\t\"usemap\": \"useMap\",\r\n\t\t\"frameborder\": \"frameBorder\",\r\n\t\t\"contenteditable\": \"contentEditable\"\r\n\t};\r\n\tprop = prop.toLowerCase();\r\n\treturn properties[prop] || prop;\r\n}\r\n\r\nfunction getVal(val, obj, i, current) {\r\n\r\n\t// retrieve as function\r\n\tif ($.isFunction(val)) {\r\n\t\tval = val.call(obj, i, $.isFunction(current) ? current() : current); // current can be a function\r\n\t}\r\n\treturn val;\r\n}\r\n\r\nfunction setCss(dabby, props, value) {\r\n\r\n\t// set vars\r\n\tlet name = props,\r\n\t\tkeys,\r\n\t\tk,\r\n\t\tremove;\r\n\r\n\t// normalise props\r\n\tif (typeof props === \"string\") {\r\n\t\tprops = {};\r\n\t\tprops[name] = value;\r\n\t}\r\n\r\n\t// cache properties for loop\r\n\tkeys = Object.keys(props);\r\n\tk = keys.length;\r\n\r\n\t// set properties\r\n\twhile (k--) {\r\n\t\tlet i = dabby.length;\r\n\t\twhile (i--) {\r\n\t\t\tlet val = props[keys[k]] === \"\" ? undefined : getVal(props[keys[k]], dabby[i], k, dabby[i].style[keys[k]]);\r\n\t\t\tif (!isNaN(val)) {\r\n\t\t\t\tval += \"px\";\r\n\t\t\t}\r\n\t\t\tdabby[i].style[remove ? \"removeProperty\" : \"setProperty\"](dasherise(keys[k]), val);\r\n\t\t}\r\n\t}\r\n\treturn dabby;\r\n}\r\n\r\nconst dabby = function (selector, context) {\r\n\tlet nodes = [],\r\n\t\tmatch,\r\n\t\tobj;\r\n\r\n\t// enables new object to be created through $()\r\n\tif (!(this instanceof dabby)) {\r\n\t\treturn new dabby(selector, context);\r\n\r\n\t// if no selector, return empty colletion\r\n\t} else if (selector) {\r\n\r\n\t\t// $ collection\r\n\t\tif (selector instanceof dabby) {\r\n\t\t\treturn selector;\r\n\r\n\t\t// single node\r\n\t\t} else if (selector.nodeType || $.isWindow(selector)) {\r\n\t\t\tnodes = [selector];\r\n\r\n\t\t// ready function\r\n\t\t} else if ($.isFunction(selector)) {\r\n\t\t\tif (document.readyState !== \"loading\") {\r\n\t\t\t\tselector.call(document, $);\r\n\t\t\t} else {\r\n\t\t\t\tdocument.addEventListener(\"DOMContentLoaded\", () => {selector.call(document, $);}, {once: true});\r\n\t\t\t}\r\n\r\n\t\t// array|NodeList|HTMLCollection of nodes\r\n\t\t} else if (typeof selector !== \"string\") {\r\n\t\t\tnodes = selector;\r\n\r\n\t\t// CSS selector\r\n\t\t} else if (selector.indexOf(\"<\") === -1) {\r\n\t\t\tcontext = context || document;\r\n\t\t\t$(context).each((i, obj) => {\r\n\t\t\t\tnodes = nodes.concat(Array.from(obj.querySelectorAll(selector)));\r\n\t\t\t});\r\n\r\n\t\t// create a single node and attach properties\r\n\t\t} else if ((match = selector.match(/^<([a-z0-9]+)(( ?\\/)?|><\\/\\1)>$/i)) !== null) {\r\n\t\t\tnodes.push(document.createElement(match[1]));\r\n\r\n\t\t\t// context is CSS attributes\r\n\t\t\tif (context instanceof Object) {\r\n\t\t\t\tobj = $(nodes);\r\n\t\t\t\t$.each(context, (prop, value) => {\r\n\t\t\t\t\tobj.attr(prop, value);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t// parse HTML into nodes\r\n\t\t} else {\r\n\t\t\t//nodes = (context || doc).createRange().createContextualFragment(selector).childNodes; // not supported in iOS 9\r\n\t\t\tobj = document.createElement(\"template\");\r\n\t\t\tobj.innerHTML = selector;\r\n\t\t\tnodes = obj.content ? obj.content.children : obj.children;\r\n\t\t}\r\n\t}\r\n\r\n\t// build nodes\r\n\tthis.length = 0;\r\n\tArray.from(nodes).forEach(node => { // HTMLCollection objects don't support forEach\r\n\t\tif ([1, 9, 11].indexOf(node.nodeType) > -1 || $.isWindow(node)) { // only element, document, documentFragment and window\r\n\t\t\tthis[this.length++] = node;\r\n\t\t}\r\n\t});\r\n\treturn this;\r\n},\r\n\t$ = dabby; // alias in this scope\r\n\r\n// alias functions\r\ndabby.fn = dabby.prototype;\r\n\r\n$.each = (obj, callback) => {\r\n\tconst keys = Object.keys(obj),\r\n\t\tlen = keys.length;\r\n\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tif (callback.call(obj[keys[i]], keys[i], obj[keys[i]]) === false) {\r\n\t\t\tbreak; // stop if callback returns false\r\n\t\t}\r\n\t}\r\n\treturn obj;\r\n};\r\n\r\n$.ajax = (url, settings) => {\r\n\r\n\t// normalise args\r\n\tif (typeof url === \"object\") {\r\n\t\tsettings = url;\r\n\t} else {\r\n\t\tif (typeof settings !== \"object\") {\r\n\t\t\tsettings = {};\r\n\t\t}\r\n\t\tsettings.url = url;\r\n\t}\r\n\r\n\t// set default settings\r\n\tsettings = $.extend({\r\n\t\tmethod: \"GET\",\r\n\t\tcache: null, // start will null so we can see if explicitly set\r\n\t\tdata: null,\r\n\t\tdataType: null, // only changes behavior with json, jsonp, script\r\n\t\tasync: true,\r\n\t\tcrossDomain: false,\r\n\t\tscriptCharset: null,\r\n\t\tjsonp: \"callback\",\r\n\t\tjsonpCallback: \"dabby\" + Date.now(),\r\n\t\theaders: {\r\n\t\t\t\"X-Requested-With\": \"XMLHttpRequest\",\r\n\t\t\t\"Content-Type\": settings.contentType || \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n\t\t},\r\n\t\tcontext: null,\r\n\t\tstatusCode: {},\r\n\t\tusername: null,\r\n\t\tpassword: null\r\n\t}, settings);\r\n\r\n\t// determine datatype\r\n\tif (!settings.dataType && /\\.js($|\\?)/.test(settings.url)) {\r\n\t\tsettings.dataType = \"script\";\r\n\t}\r\n\r\n\tlet sync = [\"script\", \"jsonp\"].indexOf(settings.dataType) > -1,\r\n\t\tscript, xhr, data;\r\n\r\n\t// add data to query string\r\n\tif (settings.data) {\r\n\t\tdata = typeof settings.data === \"string\" ? settings.data : $.param(settings.data);\r\n\t}\r\n\tif (data && settings.method === \"GET\") {\r\n\t\tsettings.url += (settings.url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + data;\r\n\t}\r\n\r\n\t// add cache buster\r\n\tif (settings.cache || (settings.cache === null && sync)) {\r\n\t\tsettings.url += (settings.url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + \"_=\" + (+new Date());\r\n\t}\r\n\r\n\t// fetch script\r\n\tif (sync || settings.crossDomain) {\r\n\t\tscript = document.createElement(\"script\");\r\n\t\tif (settings.scriptCharset) {\r\n\t\t\tscript.charset = settings.scriptCharset;\r\n\t\t}\r\n\r\n\t\t// add callback parameter\r\n\t\tif (settings.dataType === \"jsonp\") {\r\n\t\t\tsettings.url += (settings.url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + settings.jsonp + \"=\" + settings.jsonpCallback;\r\n\t\t}\r\n\r\n\t\t// setup event callbacks\r\n\t\t$.each({\r\n\t\t\tload: \"success\",\r\n\t\t\terror: \"error\"\r\n\t\t}, (key, value) => {\r\n\t\t\tscript.addEventListener(key, () => {\r\n\t\t\t\tlet response = settings.dataType === \"jsonp\" ? window[settings.jsonpCallback] || null : null;\r\n\t\t\t\t[settings[value], settings.complete].forEach(callback => {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(settings.context, callback === settings.complete ? [null, value] : [response, value]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, {once: true});\r\n\t\t});\r\n\r\n\t\tscript.src = settings.url;\r\n\t\tscript.async = settings.async;\r\n\t\tdocument.head.appendChild(script);\r\n\r\n\t// make xhr request\r\n\t} else {\r\n\t\tconst callback = (xhr, status) => {\r\n\t\t\tlet response = xhr.responseText,\r\n\t\t\t\tcallbacks = [];\r\n\r\n\t\t\t// parse JSON\r\n\t\t\tif ([\"json\", null].indexOf(settings.dataType) > -1) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tresponse = JSON.parse(response);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// do nothing\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// run callbacks\r\n\t\t\t[settings.statusCode[xhr.status], settings[status], settings.complete].forEach(callback => {\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback.apply(settings.context, callback === settings.complete ? [xhr, status] : [response, status, xhr]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// create XHR object\r\n\t\txhr = new XMLHttpRequest();\r\n\t\txhr.open(settings.method, settings.url, settings.async);\r\n\r\n\t\t// add authoisation header\r\n\t\tif (settings.username) {\r\n\t\t\tsettings.headers.Authorization = btoa(settings.username + \":\" + settings.password);\r\n\t\t}\r\n\r\n\t\t// headers\r\n\t\t$.each(settings.headers, (key, value) => {\r\n\t\t\txhr.setRequestHeader(key, value);\r\n\t\t});\r\n\r\n\t\t// callbacks\r\n\t\txhr.onload = () => {\r\n\t\t\tconst types = {\r\n\t\t\t\t200: \"success\",\r\n\t\t\t\t204: \"nocontent\",\r\n\t\t\t\t304: \"notmodified\"\r\n\t\t\t};\r\n\t\t\tcallback(xhr, types[xhr.status] || \"error\");\r\n\t\t};\r\n\t\txhr.ontimeout = () => {\r\n\t\t\tcallback(xhr, \"timeout\");\r\n\t\t};\r\n\t\txhr.onabort = () => {\r\n\t\t\tcallback(xhr, \"abort\");\r\n\t\t};\r\n\t\txhr.send(settings.method === \"GET\" ? null : data);\r\n\t\treturn xhr;\r\n\t}\r\n};\r\n\r\n[\"get\", \"post\"].forEach(name => {\r\n\t$[name] = (url, data, success, type) => {\r\n\t\tconst isFunc = $.isFunction(data);\r\n\t\tlet settings = typeof(url) === \"object\" ? url : {\r\n\t\t\turl: url,\r\n\t\t\tdata: isFunc ? {} : data,\r\n\t\t\tsuccess: isFunc ? data : success,\r\n\t\t\tdataType: isFunc ? success : type\r\n\t\t};\r\n\t\tsettings.method = name.toUpperCase();\r\n\t\treturn $.ajax(settings);\r\n\t};\r\n});\r\n\r\n$.getScript = (url, success) => $.ajax({\r\n\turl: url,\r\n\tdataType: \"script\",\r\n\tsuccess: success\r\n});\r\n\r\n$.fn.load = function (url, data, success) {\r\n\tif (this[0]) {\r\n\r\n\t\t// get selector from URL\r\n\t\tconst [uri, selector] = url.split(\" \", 2);\r\n\r\n\t\t// check for data\r\n\t\tif ($.isFunction(data)) {\r\n\t\t\tsuccess = data;\r\n\t\t\tdata = undefined;\r\n\t\t}\r\n\r\n\t\t// make AJAX request\r\n\t\t$.ajax(uri, {\r\n\t\t\tdata: data,\r\n\t\t\ttype: data instanceof Object ? \"POST\" : \"GET\",\r\n\t\t\tsuccess: (response, status, xhr) => {\r\n\r\n\t\t\t\t// if a selector is specified, find it in the returned document\r\n\t\t\t\tlet html = \"\",\r\n\t\t\t\t\ti = this.length;\r\n\r\n\t\t\t\t// refine by selector if supplied\r\n\t\t\t\tif (selector) {\r\n\t\t\t\t\t$(response).filter(selector).each((key, obj) => {\r\n\t\t\t\t\t\thtml += obj.outerHTML;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\thtml = response;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// set HTML to nodes in collection\r\n\t\t\t\twhile (i--) {\r\n\t\t\t\t\tthis[i].innerHTML = html;\r\n\r\n\t\t\t\t\t// fire success callback on nodes\r\n\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\tsuccess.call(this[i], response, status, xhr);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n$.param = obj => {\r\n\tlet params = [],\r\n\t\tadd = (key, value, params) => {\r\n\t\t\tlet isArr = $.isArray(value);\r\n\t\t\tif (isArr || typeof value === \"object\") {\r\n\t\t\t\t$.each(value, (i, val) => {\r\n\t\t\t\t\tparams = add(key + \"[\" + (isArr ? \"\" : i) + \"]\", val, params);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tparams.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(value));\r\n\t\t\t}\r\n\t\t\treturn params;\r\n\t\t};\r\n\r\n\t// process values\r\n\t$.each(obj, (key, item) => {\r\n\t\tparams = add(key, item, params);\r\n\t});\r\n\treturn params.join(\"&\");\r\n};\r\n\r\n$.fn.serialize = function () {\r\n\tconst selector = \"input[name]:not([type=file]):not([type=submit]),textarea[name],select[name]\",\r\n\t\tobj = this.is(selector) ? this.filter(selector) : $(selector, this),\r\n\t\tadd = (name, value, params) => {\r\n\t\t\tlet match;\r\n\r\n\t\t\tif ((match = name.match(/([^\\[]*)\\[([^\\]]*)\\](.*)/)) !== null) {\r\n\t\t\t\tname = match[1];\r\n\t\t\t\tlet arr = add(match[2] + match[3], value, params[name] || {});\r\n\t\t\t\tvalue = arr;\r\n\t\t\t}\r\n\r\n\t\t\tif (name !== \"\") {\r\n\t\t\t\tparams[name] = value;\r\n\t\t\t} else {\r\n\t\t\t\tif (!$.isArray(params)) {\r\n\t\t\t\t\tparams = [];\r\n\t\t\t\t}\r\n\t\t\t\tparams = params.concat($.isArray(value) ? value : [value]);\r\n\t\t\t}\r\n\t\t\treturn params;\r\n\t\t};\r\n\r\n\tlet params = {};\r\n\r\n\t// process values\r\n\tobj.each((key, obj) => {\r\n\t\tconst value = $(obj).val();\r\n\t\tif (!obj.disabled && value !== undefined) {\r\n\t\t\tparams = add(obj.getAttribute(\"name\"), value, params);\r\n\t\t}\r\n\t});\r\n\treturn $.param(params);\r\n};\r\n\r\n$.fn.attr = function (prop, value) {\r\n\tlet isArr = $.isArray(prop),\r\n\t\ti,\r\n\t\tevents,\r\n\t\tarr = {};\r\n\r\n\t// set properties\r\n\tif (isArr || value || value === null) {\r\n\t\ti = this.length,\r\n\t\tevents = getEvents();\r\n\r\n\t\t// normalise to array\r\n\t\tif (!isArr) {\r\n\t\t\tarr[prop] = value;\r\n\t\t\tprop = arr;\r\n\t\t}\r\n\r\n\t\twhile (i--) {\r\n\t\t\t$.each(prop, (key, val) => {\r\n\t\t\t\tif (events.indexOf(key) > -1) {\r\n\t\t\t\t\t$(this[i]).on(key, val);\r\n\t\t\t\t} else if (key === \"style\") {\r\n\t\t\t\t\tthis[i].style.cssText = val;\r\n\t\t\t\t} else if (key === \"class\") {\r\n\t\t\t\t\tthis[i].className = val;\r\n\t\t\t\t} else if (key === \"text\") {\r\n\t\t\t\t\tthis[i].textContent = val;\r\n\t\t\t\t} else if (value === null) {\r\n\t\t\t\t\tthis[i].removeAttribute(key);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis[i].setAttribute(key, val);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// retrieve properties\r\n\t} else if (this[0]) {\r\n\t\tif (prop === \"style\") {\r\n\t\t\treturn this[0].style.cssText;\r\n\t\t}\r\n\t\tif (prop === \"class\") {\r\n\t\t\treturn this[0].className;\r\n\t\t}\r\n\t\treturn this[0].getAttribute(prop);\r\n\t}\r\n};\r\n\r\n[\"addClass\", \"removeClass\", \"toggleClass\"].forEach(name => {\r\n\t$.fn[name] = function (cls) {\r\n\r\n\t\t// remove \"Class\" from name for classList method\r\n\t\tlet func = name.substr(0, name.length - 5),\r\n\t\t\ti = this.length;\r\n\r\n\t\t// manage classes on nodes\r\n\t\twhile (i--) {\r\n\t\t\tlet arr = getVal(cls, this[i], i, this[i].className);\r\n\t\t\tif (typeof arr === \"string\") {\r\n\t\t\t\tarr = arr.split(\" \");\r\n\t\t\t}\r\n\t\t\tconst len = arr.length;\r\n\t\t\tfor (let n = 0; n < len; n++) {\r\n\t\t\t\tthis[i].classList[func](arr[n]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\n\r\n$.fn.css = function (props, value) {\r\n\r\n\t// set the values\r\n\tif (value !== undefined || $.isPlainObject(props)) {\r\n\t\treturn setCss(this, props, value);\r\n\r\n\t// retrieve value from first property\r\n\t} else if (this[0]) {\r\n\t\tlet name = props,\r\n\t\t\ti,\r\n\t\t\tstyle = getComputedStyle(this[0], \"\"),\r\n\t\t\toutput = {},\r\n\t\t\tret = false;\r\n\r\n\t\tif (typeof name === \"string\") {\r\n\t\t\tprops = [name];\r\n\t\t\tret = true;\r\n\t\t}\r\n\t\ti = props.length;\r\n\t\twhile (i--) {\r\n\t\t\toutput[props[i]] = style.getPropertyValue(dasherise(props[i]));\r\n\t\t\tif (ret) {\r\n\t\t\t\treturn output[props[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n};\r\n\r\n$.fn.data = function (name, data) {\r\n\r\n\t// convert data to object\r\n\tif (typeof name === \"object\") {\r\n\t\tdata = name;\r\n\t} else if (data !== undefined) {\r\n\t\tlet temp = {};\r\n\t\ttemp[name] = data;\r\n\t\tdata = temp;\r\n\t}\r\n\r\n\t// set value\r\n\tif (data !== undefined) {\r\n\t\tlet i = this.length;\r\n\t\twhile (i--) {\r\n\t\t\t$.each(data, (key, value) => {\r\n\t\t\t\tthis[i].dataset[camelise(key)] = typeof value === \"object\" ? JSON.stringify(value) : value;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// get value\r\n\t} else if (this[0] && this[0].dataset) {\r\n\t\tlet parse = value => {\r\n\t\t\ttry {\r\n\t\t\t\treturn JSON.parse(value);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// all properties\r\n\t\tif (name === undefined) {\r\n\t\t\tlet arr = {};\r\n\t\t\t$.each(this[0].dataset, (key, value) => {\r\n\t\t\t\tarr[key] = parse(value);\r\n\t\t\t});\r\n\t\t\treturn arr;\r\n\r\n\t\t// retrieve specific property\r\n\t\t} else {\r\n\t\t\tname = camelise(name);\r\n\t\t\tif (this[0].dataset.hasOwnProperty(name)) {\r\n\t\t\t\treturn parse(this[0].dataset[name]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n$.fn.hasClass = function (cls) {\r\n\tlet i = this.length;\r\n\twhile (i--) {\r\n\t\tif (this[i].classList.contains(cls)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n$.fn.prop = function (prop, value) {\r\n\tprop = getProp(prop);\r\n\r\n\t// set\r\n\tif (value !== undefined) {\r\n\t\tlet i = this.length;\r\n\t\twhile (i--) {\r\n\t\t\tthis[i][prop] = getVal(value, this[i], i, this[i][prop]);\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// get\r\n\t} else if (this[0]) {\r\n\t\treturn this[0][prop];\r\n\t}\r\n};\r\n\r\n$.fn.removeProp = function (prop) {\r\n\tif (this[0]) {\r\n\t\tlet i = this.length;\r\n\t\tprop = getProp(prop);\r\n\r\n\t\twhile (i--) {\r\n\t\t\tdelete this[i][prop];\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\n$.fn.val = function (value) {\r\n\r\n\t// set value\r\n\tif (value !== undefined) {\r\n\t\tlet i = this.length,\r\n\t\t\tval;\r\n\t\twhile (i--) {\r\n\t\t\tlet val = getVal(value, this[i], i, () => $(this[i]).val());\r\n\t\t\tif (this[i].multiple) {\r\n\t\t\t\tval = $.map($.isArray(val) ? val : [val], item => String(item)); // convert to string\r\n\t\t\t\t$(\"option\", this[i]).each((key, obj) => {\r\n\t\t\t\t\tobj.selected = val.indexOf(String(obj.value)) > -1;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis[i].value = String(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// read value from first node\r\n\t} else if (this[0]) {\r\n\r\n\t\t// get multiple values\r\n\t\tif (this[0].multiple) {\r\n\t\t\tlet values = [];\r\n\t\t\t$(\"option\", this[0]).each((key, obj) => {\r\n\t\t\t\tif (obj.selected) {\r\n\t\t\t\t\tvalues.push(String(obj.value));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn values;\r\n\r\n\t\t// get radio box value\r\n\t\t} else if (this[0].type === \"radio\") {\r\n\t\t\tlet obj = this.filter(\"[name='\" + this[0].name + \"']:checked\")[0];\r\n\t\t\treturn obj ? String(obj.value) : undefined;\r\n\r\n\t\t// get single value\r\n\t\t} else if (this[0].type !== \"checkbox\" || this[0].checked) {\r\n\t\t\treturn String(this[0].value);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n$.fn.each = function (callback) {\r\n\t$.each(Array.from(this), callback);\r\n\treturn this;\r\n};\r\n\r\n$.fn.get = function (i) {\r\n\treturn i === undefined ? Array.from(this) : this[i >= 0 ? i : i + this.length];\r\n};\r\n\r\n$.fn.map = function (callback) {\r\n\tconst len = this.length;\r\n\tlet values = [],\r\n\t\ti = 0;\r\n\r\n\tfor (; i < len; i++) {\r\n\t\tvalues.push(callback.call(this[i], i, this[i]));\r\n\t}\r\n\treturn values;\r\n};\r\n\r\n$.fn.offset = function (coords) {\r\n\tconst doc = document.documentElement;\r\n\tlet rect,\r\n\t\ti = this.length,\r\n\t\tpos;\r\n\r\n\t// set\r\n\tif (coords) {\r\n\t\twhile (i--) {\r\n\r\n\t\t\t// if coords is callback, generate value\r\n\t\t\trect = this[i].getBoundingClientRect();\r\n\t\t\tcoords = getVal(coords, this[i], i, $(this[i]).offset());\r\n\r\n\t\t\tif (coords.top !== undefined && coords.left !== undefined) {\r\n\t\t\t\tlet style = getComputedStyle(this[i]);\r\n\t\t\t\tpos = style.getPropertyValue(\"position\");\r\n\r\n\t\t\t\t// set position relative if static\r\n\t\t\t\tif (pos === \"static\") {\r\n\t\t\t\t\tthis[i].style.position = \"relative\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// add current offset\r\n\t\t\t\tcoords.top += parseFloat(style.getPropertyValue(\"top\")) || 0;\r\n\t\t\t\tcoords.left += parseFloat(style.getPropertyValue(\"left\")) || 0;\r\n\r\n\t\t\t\t// remove parent offset and viewport scroll\r\n\t\t\t\tif (pos !== \"fixed\") {\r\n\t\t\t\t\tcoords.top -= doc.scrollTop + rect.top;\r\n\t\t\t\t\tcoords.left -= doc.scrollLeft + rect.left;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// set offset\r\n\t\t\t\tthis[i].style.top = coords.top + \"px\";\r\n\t\t\t\tthis[i].style.left = coords.left + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// get\r\n\t} else if (this[0]) {\r\n\t\tpos = this[0].style.position === \"fixed\";\r\n\t\trect = this[0].getBoundingClientRect();\r\n\t\treturn {\r\n\t\t\ttop: rect.top + (pos ? 0 : doc.scrollTop),\r\n\t\t\tleft: rect.left + (pos ? 0 : doc.scrollLeft)\r\n\t\t};\r\n\t}\r\n};\r\n\r\n$.fn.offsetParent = function () {\r\n\treturn $(this[0] ? this[0].offsetParent : null);\r\n};\r\n\r\n$.fn.position = function () {\r\n\tif (this[0]) {\r\n\t\treturn {left: this[0].offsetLeft, top: this[0].offsetTop};\r\n\t}\r\n};\r\n\r\n[\"scrollLeft\", \"scrollTop\"].forEach(item => {\r\n\t$.fn[item] = function (pos) {\r\n\r\n\t\t// set\r\n\t\tif (pos !== undefined) {\r\n\t\t\tlet i = this.length,\r\n\t\t\t\ttl = item.indexOf(\"Top\") > -1 ? \"top\" : \"left\";\r\n\t\t\twhile (i--) {\r\n\t\t\t\tlet val = getVal(pos, this, i, this[i][item]);\r\n\t\t\t\tif ($.isWindow(this[i])) {\r\n\t\t\t\t\tlet obj = {};\r\n\t\t\t\t\tobj[tl] = val;\r\n\t\t\t\t\tthis[i].scroll(obj);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis[i][item] = val;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn this;\r\n\r\n\t\t// get\r\n\t\t} else if (this[0]) {\r\n\t\t\tif ($.isWindow(this[0])) {\r\n\t\t\t\titem = item === \"scrollTop\" ? \"pageYOffset\" : \"pageXOffset\";\r\n\t\t\t}\r\n\t\t\treturn this[0][item];\r\n\t\t}\r\n\t};\r\n});\r\n\r\n[\"width\", \"height\", \"innerWidth\", \"innerHeight\", \"outerWidth\", \"outerHeight\"].forEach(dim => {\r\n\r\n\tconst getAdditionalLength = (obj, wh, props) => {\r\n\t\tconst style = getComputedStyle(obj);\r\n\t\tlet i = props.length,\r\n\t\t\tvalue = 0,\r\n\t\t\tsuffix;\r\n\r\n\t\twhile (i--) {\r\n\t\t\tsuffix = props[i] === \"border\" ? \"-width\" : \"\";\r\n\t\t\tvalue += parseFloat(style.getPropertyValue(props[i] + (wh === \"width\" ? \"-left\" : \"-top\") + suffix)) || 0;\r\n\t\t\tvalue += parseFloat(style.getPropertyValue(props[i] + (wh === \"width\" ? \"-right\" : \"-bottom\") + suffix)) || 0;\r\n\t\t}\r\n\t\treturn value;\r\n\t};\r\n\r\n\t$.fn[dim] = function (val) {\r\n\t\tconst valtype = typeof(val),\r\n\t\t\twh = dim.toLowerCase().indexOf(\"width\") > -1 ? \"width\" : \"height\", // width or height\r\n\t\t\tio = dim.indexOf(\"inner\") > -1 ? \"inner\" : (dim.indexOf(\"outer\") > -1 ? \"outer\" : \"\"); // inner outer or neither\r\n\t\tlet i = this.length,\r\n\t\t\tvalue,\r\n\t\t\twhu,\r\n\t\t\tprops,\r\n\t\t\tparam;\r\n\r\n\t\t// set value\r\n\t\tif (val !== undefined && valtype !== \"boolean\") {\r\n\t\t\twhile (i--) {\r\n\r\n\t\t\t\t// set base value\r\n\t\t\t\tvalue = getVal(val, this[i], i, this[i][dim]);\r\n\t\t\t\tif (!isNaN(val)) {\r\n\t\t\t\t\tvalue += \"px\";\r\n\t\t\t\t}\r\n\t\t\t\tthis[i].style[wh] = value; // set here so we can convert to px\r\n\r\n\t\t\t\t// add additional lengths\r\n\t\t\t\tif (io) {\r\n\t\t\t\t\tvalue = parseFloat(getComputedStyle(this[i]).getPropertyValue(wh));\r\n\t\t\t\t\tprops = [\"padding\"];\r\n\t\t\t\t\tif (io === \"outer\") {\r\n\t\t\t\t\t\tprops.push(\"border\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalue -= getAdditionalLength(this[i], wh, props);\r\n\t\t\t\t\tif (!isNaN(val)) {\r\n\t\t\t\t\t\tvalue += \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis[i].style[wh] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\r\n\t\t// get value\r\n\t\t} else if (this[0]) {\r\n\t\t\twhu = wh === \"width\" ? \"Width\" : \"Height\";\r\n\r\n\t\t\t// document\r\n\t\t\tif (this[0].nodeType === Node.DOCUMENT_NODE) {\r\n\t\t\t\treturn this[0].documentElement[\"scroll\" + whu];\r\n\r\n\t\t\t// element\r\n\t\t\t} else if (!$.isWindow(this[0])) {\r\n\t\t\t\tparam = io === \"outer\" ? \"offset\" : \"client\";\r\n\t\t\t\tvalue = this[0][param + whu];\r\n\r\n\t\t\t\t// add padding on, or if outer and margins requested, add margins on\r\n\t\t\t\tif (io === \"\" || (io === \"outer\" && val === true)) {\r\n\t\t\t\t\tvalue += getAdditionalLength(this[0], wh, [io ? \"margin\" : \"padding\"]) * (io ? 1 : -1); // add margin, minus padding\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t// window\r\n\t\t\t} else if (io === \"inner\") {\r\n\t\t\t\treturn this[0].document.documentElement[\"client\" + whu];\r\n\t\t\t} else {\r\n\t\t\t\treturn this[0][\"inner\" + whu];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});\r\n\r\ngetEvents().forEach(event => {\r\n\t$.fn[event] = function (data, callback) {\r\n\t\treturn data ? this.on(event, data, callback) : this.trigger(event);\r\n\t};\r\n});\r\n\r\n// add and remove event handlers\r\n[\"on\", \"one\", \"off\"].forEach(name => {\r\n\t$.fn[name] = function (events, selector, data, callback) {\r\n\t\tlet i = this.length;\r\n\r\n\t\tevents = events.split(\" \");\r\n\r\n\t\t// sort out args\r\n\t\tif ($.isFunction(selector)) {\r\n\t\t\tcallback = selector;\r\n\t\t\tselector = null;\r\n\t\t} else if ($.isFunction(data)) {\r\n\t\t\tcallback = data;\r\n\t\t\tdata = null;\r\n\t\t}\r\n\r\n\t\t// attach event\r\n\t\twhile (i--) {\r\n\t\t\tlet e = events.length;\r\n\r\n\t\t\t// record the original function\r\n\t\t\tif (name !== \"off\") {\r\n\t\t\t\tif (!this[i].events) {\r\n\t\t\t\t\tthis[i].events = [];\r\n\t\t\t\t}\r\n\t\t\t\tlet fn = function (evt) { // delegate function\r\n\t\t\t\t\tlet target = [this];\r\n\t\t\t\t\tif (selector) {\r\n\t\t\t\t\t\tlet t = $(evt.target);\r\n\t\t\t\t\t\ttarget = t.add(t.parents()).filter(selector).get(); // is the selector in the targets parents?\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tif (data) { // set data to event object\r\n\t\t\t\t\t\t\tevt.data = data;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let i = 0, len = target.length; i < len; i++) {\r\n\t\t\t\t\t\t\tif (callback.call(target[i], evt, evt.args) === false) {\r\n\t\t\t\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t\t\t\t\tevt.stopPropagation();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tthis[i].events.push({\r\n\t\t\t\t\tevents: events,\r\n\t\t\t\t\tcallback: callback,\r\n\t\t\t\t\tselector: selector,\r\n\t\t\t\t\tfunc: fn,\r\n\t\t\t\t\tonce: name === \"one\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// trigger\r\n\t\t\t\twhile (e--) {\r\n\t\t\t\t\tthis[i].addEventListener(events[e], fn, {once: name === \"one\", capture: !!selector});\r\n\t\t\t\t}\r\n\r\n\t\t\t// find the original function\r\n\t\t\t} else if (this[i].events.length) {\r\n\t\t\t\twhile (e--) {\r\n\t\t\t\t\tthis[i].events.forEach((evt, n) => {\r\n\t\t\t\t\t\tconst index = evt.events.indexOf(events[e]);\r\n\t\t\t\t\t\tif (index !== -1 && evt.callback === callback && evt.selector === selector) {\r\n\t\t\t\t\t\t\tthis[i].removeEventListener(events[e], evt.func, {once: evt.once, capture: !!evt.selector}); // must pass same arguments\r\n\t\t\t\t\t\t\tthis[i].events[n].events.splice(index, 1);\r\n\t\t\t\t\t\t\tif (!this[i].events[n].events.length) {\r\n\t\t\t\t\t\t\t\tthis[i].events.splice(n, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\n\r\n$.fn.trigger = function (name, data) {\r\n\tconst evt = new CustomEvent(name, {bubbles: true, cancelable: true});\r\n\tlet i = this.length;\r\n\r\n\t// copy extra data to event object\r\n\tif (data) {\r\n\t\tevt.args = data;\r\n\t}\r\n\twhile (i--) {\r\n\t\tthis[i].dispatchEvent(evt);\r\n\t\t/*if (this[i].dispatchEvent(evt) && this[i][name]) {\r\n\t\t\tthis[i][name]();\r\n\t\t}*/\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n$.fn.clone = function () {\r\n\tlet nodes = [],\r\n\t\ti = this.length;\r\n\r\n\twhile (i--) {\r\n\t\tnodes[i] = this[i].cloneNode(true);\r\n\t}\r\n\treturn $(nodes);\r\n};\r\n\r\n$.fn.empty = function () {\r\n\tlet i = this.length;\r\n\twhile (i--) {\r\n\t\twhile (this[i].firstChild && this[i].removeChild(this[i].firstChild));\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n$.fn.html = function (html) {\r\n\r\n\t// set\r\n\tif (html !== undefined) {\r\n\t\tlet i = this.length;\r\n\t\twhile (i--) {\r\n\t\t\tthis[i].innerHTML = getVal(html, this[i], i, this[i].innerHTML);\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// get\r\n\t} else if (this[0]) {\r\n\t\treturn this[0].innerHTML;\r\n\t}\r\n};\r\n\r\n$.each({\r\n\tbefore: \"beforeBegin\",\r\n\tprepend: \"afterBegin\",\r\n\tappend: \"beforeEnd\",\r\n\tafter: \"afterEnd\"\r\n}, (name, pos) => {\r\n\t$.fn[name] = function (html) {\r\n\t\tconst pre = [\"before\", \"prepend\"].indexOf(name) > -1,\r\n\t\t\tisFunc = $.isFunction(html);\r\n\t\tlet i = this.length,\r\n\t\t\telems = $();\r\n\r\n\t\tif (!isFunc) { // multiple arguments containing nodes?\r\n\t\t\t$.each(arguments, (i, arg) => {\r\n\t\t\t\telems.add(arg);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\twhile (i--) {\r\n\t\t\tif (isFunc) {\r\n\t\t\t\telems = $(getVal(html, this[i], i, this[i].innerHTML));\r\n\t\t\t}\r\n\t\t\tlet backwards = elems.length, // for counting down\r\n\t\t\t\tforwards = -1; // for counting up\r\n\t\t\twhile (pre ? backwards-- : ++forwards < backwards) { // insert forwards or backwards?\r\n\t\t\t\tlet obj = elems[pre ? backwards : forwards];\r\n\r\n\t\t\t\t// clone if i !== 0\r\n\t\t\t\tif (i) {\r\n\t\t\t\t\tobj = obj.cloneNode(true);\r\n\t\t\t\t}\r\n\t\t\t\tthis[i].insertAdjacentElement(pos, obj);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\n\r\n$.each({\r\n\tinsertBefore: \"before\",\r\n\tprependTo: \"prepend\",\r\n\tappendTo: \"append\",\r\n\tinsertAfter: \"after\"\r\n}, (name, func) => {\r\n\t$.fn[name] = function (selector) {\r\n\t\tlet i = this.length,\r\n\t\t\tobj = $(selector);\r\n\r\n\t\twhile (i--) {\r\n\t\t\tobj[func](this[i]);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\n\r\n[\"remove\", \"detach\"].forEach(func => {\r\n\t$.fn[func] = function (selector) {\r\n\t\tlet i = this.length,\r\n\t\t\tnodes = [],\r\n\t\t\tobj = [];\r\n\r\n\t\t// detach selected nodes\r\n\t\twhile (i--) {\r\n\t\t\tif (!selector || filterNodes(this[i], selector).length) {\r\n\t\t\t\tnodes.push(this[i].parentNode.removeChild(this[i]));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// create a new dabby object to return\r\n\t\treturn func === \"detach\" ? $(nodes) : this;\r\n\t};\r\n});\r\n\r\n// needs more understanding of how this is supposed to work!!!\r\n\r\n[\"replaceWith\", \"replaceAll\"].forEach(name => {\r\n\t$.fn[name] = function (html) {\r\n\t\tconst all = name === \"replaceAll\",\r\n\t\t\tsource = all ? $(html) : this;\r\n\t\tlet target = all ? this : html,\r\n\t\t\tisFunc = $.isFunction(target);\r\n\r\n\t\tif (!isFunc) {\r\n\t\t\ttarget = $(target);\r\n\t\t}\r\n\r\n\t\tlet i = source.length;\r\n\r\n\t\twhile (i--) {\r\n\t\t\tlet n = target.length,\r\n\t\t\t\tparent = source[i].parentNode;\r\n\t\t\twhile (n--) {\r\n\t\t\t\tconst replace = isFunc ? getVal(target[n], n, target[n]) : target[n];\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tsource[i].insertAdjacentElement(\"beforebegin\", replace.cloneNode(true));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsource[i] = parent.replaceChild(i ? replace.cloneNode(true) : replace, source[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\n\r\n$.fn.slice = function (start, end) {\r\n\treturn $(this.get().slice(start, end));\r\n};\r\n\r\n$.fn.text = function (text) {\r\n\tconst get = text === undefined;\r\n\tlet len = this.length,\r\n\t\toutput = [],\r\n\t\ti = 0;\r\n\tfor (; i < len; i++) {\r\n\t\tif (get) {\r\n\t\t\toutput.push(this[i].textContent);\r\n\t\t} else {\r\n\t\t\tthis[i].textContent = getVal(text, this[i], i, this[i].textContent);\r\n\t\t}\r\n\t}\r\n\treturn get ? output.join(\" \") : this;\r\n};\r\n\r\n$.fn.unwrap = function (selector) {\r\n\tthis.parent(selector).not(\"body\").each((key, obj) => {\r\n\t\tconst parent = obj.parentNode;\r\n\r\n\t\t$(obj.children).each((i, node) => {\r\n\t\t\tparent.insertBefore(node, obj);\r\n\t\t});\r\n\t\tparent.removeChild(obj);\r\n\t});\r\n\treturn this;\r\n};\r\n\r\n$.fn.wrap = function (html) {\r\n\tlet i = this.length;\r\n\r\n\twhile (i--) {\r\n\t\t$(this[i]).wrapAll(getVal(html, this[i], i));\r\n\t}\r\n\treturn this;\r\n}\r\n\r\n$.fn.wrapAll = function (html) {\r\n\tif (this[0]) {\r\n\r\n\t\t// set variables\r\n\t\tlet len = this.length,\r\n\t\t\ti = 0,\r\n\t\t\tnode = $(getVal(html, this[0]))[0].cloneNode(true);\r\n\r\n\t\t// insert clone into parent\r\n\t\tthis[0].parentNode.insertBefore(node, null);\r\n\r\n\t\t// find innermost child of node\r\n\t\twhile (node.firstElementChild) {\r\n\t\t\tnode = node.firstElementChild;\r\n\t\t}\r\n\r\n\t\t// attach nodes to the new node\r\n\t\tfor (; i < len; i++) {\r\n\t\t\tnode.appendChild(this[i]);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n}\r\n\r\n$.fn.add = function (nodes, context) {\r\n\tnodes = $(nodes, context);\r\n\tlet len = this.length,\r\n\t\ti = nodes.length;\r\n\r\n\tthis.length += i;\r\n\twhile (i--) {\r\n\t\tthis[i + len] = nodes[i];\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n$.fn.children = function (selector) {\r\n\tlet nodes = [],\r\n\t\ti = this.length;\r\n\r\n\twhile (i--) {\r\n\t\tnodes = nodes.concat(Array.from(this[i].children));\r\n\t}\r\n\r\n\t// filter nodes by selector\r\n\tif (selector) {\r\n\t\tnodes = filterNodes(nodes, selector);\r\n\t}\r\n\treturn $(nodes);\r\n};\r\n\r\n$.fn.closest = function (selector, context) {\r\n\tlet i = this.length,\r\n\t\tnodes = [],\r\n\t\tparents,\r\n\t\tnode;\r\n\r\n\twhile (i--) {\r\n\t\tparents = [];\r\n\t\tnode = this[i];\r\n\t\twhile (node) {\r\n\t\t\tparents.push(node);\r\n\t\t\tnode = node.parentNode;\r\n\t\t}\r\n\t\tparents = filterNodes(parents, selector, context);\r\n\t\tif (parents[0]) {\r\n\t\t\tnodes.push(parents[0]);\r\n\t\t}\r\n\t}\r\n\treturn $(nodes);\r\n};\r\n\r\n$.fn.eq = function (i) {\r\n\tlet key = i < 0 ? i + this.length : i;\r\n\treturn $(this[key] || null);\r\n};\r\n\r\n[\"filter\", \"not\"].forEach(name => {\r\n\t$.fn[name] = function (selector) {\r\n\t\treturn $(filterNodes(this, selector, name === \"not\"));\r\n\t};\r\n});\r\n\r\n$.fn.find = function (selector) {\r\n\treturn $(selector, this);\r\n};\r\n\r\n$.fn.first = function () {\r\n\treturn $(this[0]);\r\n};\r\n\r\n$.fn.has = function (selector) {\r\n\treturn $(this.get().filter(node => !!$(selector, node).length));\r\n};\r\n\r\n$.fn.index = function (selector) {\r\n\tlet index = -1;\r\n\r\n\tif (this[0]) {\r\n\t\tlet nodes,\r\n\t\t\tsubject = this[0],\r\n\t\t\ttype = typeof selector,\r\n\t\t\ti;\r\n\r\n\t\t// if no selector, match against first elements siblings\r\n\t\tif (type === \"undefined\") {\r\n\t\t\tnodes = this[0].parentNode.children;\r\n\r\n\t\t// if selector is string, match first node in current collection against resulting collection\r\n\t\t} else if (type === \"string\") {\r\n\t\t\tnodes = $(selector);\r\n\r\n\t\t// if element or collection match the element or first node against current collection\r\n\t\t} else {\r\n\t\t\tnodes = this;\r\n\t\t\tsubject = $(selector)[0];\r\n\t\t}\r\n\r\n\t\ti = nodes.length;\r\n\t\twhile (i--) {\r\n\t\t\tif (nodes[i] === subject) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn index;\r\n};\r\n\r\n$.fn.is = function (selector) {\r\n\treturn !!filterNodes(this, selector).length;\r\n};\r\n\r\n$.fn.last = function () {\r\n\treturn this.eq(-1);\r\n};\r\n\r\n[\"next\", \"nextAll\", \"nextUntil\", \"prev\", \"prevAll\", \"prevUntil\"].forEach(func => {\r\n\t$.fn[func] = function (selector, filter) {\r\n\t\tconst next = func.indexOf(\"next\") > -1,\r\n\t\t\tall = func.indexOf(\"All\") > -1,\r\n\t\t\tuntil = func.indexOf(\"Until\") > -1,\r\n\t\t\tmethod = next ? \"nextElementSibling\" : \"previousElementSibling\";\r\n\t\tlet nodes = [],\r\n\t\t\ti = this.length,\r\n\t\t\tsibling;\r\n\r\n\t\t// look through each node and get siblings\r\n\t\twhile (i--) {\r\n\t\t\tsibling = this[i][method];\r\n\t\t\twhile (sibling) {\r\n\t\t\t\tnodes.push(sibling);\r\n\t\t\t\tif (all || (until && filterNodes(sibling, selector).length)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsibling = sibling[method];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// swap args for *Until methods\r\n\t\tif (until) {\r\n\t\t\tselector = filter;\r\n\t\t}\r\n\r\n\t\t// filter siblings by selector\r\n\t\tif (selector) {\r\n\t\t\tnodes = filterNodes(nodes, selector);\r\n\t\t}\r\n\r\n\t\t// return new collection\r\n\t\treturn $(nodes);\r\n\t};\r\n});\r\n\r\n[\"parent\", \"parents\", \"parentsUntil\"].forEach(func => {\r\n\t$.fn[func] = function (selector, filter) {\r\n\t\tconst all = func.indexOf(\"s\") > -1,\r\n\t\t\tuntil = func.indexOf(\"U\") > -1;\r\n\t\tlet nodes = [],\r\n\t\t\ti = this.length,\r\n\t\t\tparent;\r\n\r\n\t\twhile (i--) {\r\n\t\t\tparent = this[i].parentNode;\r\n\t\t\twhile (parent && parent.nodeType === Node.ELEMENT_NODE) {\r\n\t\t\t\tnodes.push(parent);\r\n\t\t\t\tif (!all || (until && filterNodes(parent, selector).length)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparent = parent.parentNode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (selector) {\r\n\t\t\tnodes = filterNodes(nodes, selector);\r\n\t\t}\r\n\t\treturn $(nodes);\r\n\t}\r\n});\r\n\r\n$.fn.siblings = function (selector) {\r\n\tlet i = this.length,\r\n\t\tnodes = [];\r\n\r\n\twhile (i--) {\r\n\t\tArray.from(this[i].parentNode.children).forEach(child => {\r\n\t\t\tif (child !== this[i]) {\r\n\t\t\t\tnodes.push(child);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\treturn $(selector ? filterNodes(nodes, selector) : nodes);\r\n};\r\n\r\n$.extend = (...arrs) => {\r\n\tif (arrs[0] === true) {\r\n\r\n\t\t// merge function will recursively merge items\r\n\t\tfunction merge(target, ...sources) {\r\n\t\t\tif (sources.length) {\r\n\r\n\t\t\t\t// work on next source\r\n\t\t\t\tconst source = sources.shift();\r\n\t\t\t\tif ($.isPlainObject(target) && $.isPlainObject(source)) {\r\n\r\n\t\t\t\t\t// loop through each property\r\n\t\t\t\t\tconst keys = Object.keys(source),\r\n\t\t\t\t\t\tlen = keys.length;\r\n\t\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\r\n\t\t\t\t\t\t// merge recursively if source is object, if target is not object, overwrite\r\n\t\t\t\t\t\tif ($.isPlainObject(source[keys[i]])) {\r\n\t\t\t\t\t\t\ttarget[keys[i]] = $.isPlainObject(target[keys[i]]) ? merge(target[keys[i]], source[keys[i]]) : source[keys[i]];\r\n\r\n\t\t\t\t\t\t// when source property is value just overwrite\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttarget[keys[i]] = source[keys[i]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// merge next source\r\n\t\t\t    return merge(target, ...sources);\r\n\t\t\t}\r\n\t\t\treturn target;\r\n\t\t}\r\n\t\treturn merge.apply(null, arrs.slice(1));\r\n\t} else {\r\n\t\treturn Object.assign.apply(null, arrs);\r\n\t}\r\n};\r\n\r\n$.isArray = arr => Array.isArray(arr);\r\n\r\n$.isFunction = func => func && func.constructor === Function;\r\n\r\n$.isPlainObject = obj => {\r\n\t\r\n\t// Basic check for Type object that's not null\r\n\tif (typeof obj === \"object\" && obj !== null) {\r\n\r\n\t\t// If Object.getPrototypeOf supported, use it\r\n\t    if (typeof Object.getPrototypeOf == 'function') {\r\n\t\t\tlet proto = Object.getPrototypeOf(obj);\r\n\t\t\treturn proto === Object.prototype || proto === null;\r\n\t    }\r\n\r\n\t    // Otherwise, use internal class\r\n\t    // This should be reliable as if getPrototypeOf not supported, is pre-ES5\r\n\t\treturn Object.prototype.toString.call(obj) === \"[object Object]\";\r\n \t}\r\n\r\n \t// Not an object\r\n\treturn false;\r\n};\r\n\r\n$.isWindow = obj => obj !== null && obj === obj.window;\r\n\r\n$.map = (obj, callback) => {\r\n\tconst keys = Object.keys(obj),\r\n\t\tlen = keys.length;\r\n\tlet arr = [],\r\n\t\ti = 0,\r\n\t\tresult;\r\n\r\n\tfor (; i < len; i++) {\r\n\t\tresult = callback.call(window, obj[keys[i]], keys[i])\r\n\t\tif (![null, undefined].indexOf(result) > -1) {\r\n\t\t\tarr.push(result);\r\n\t\t}\r\n\t}\r\n\treturn arr;\r\n};\r\nreturn dabby;}));\n//# sourceMappingURL=dabby.es5.js.map"]}