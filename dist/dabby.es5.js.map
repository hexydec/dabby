{"version":3,"sources":["dabby.es5.js"],"names":["global","factory","define","amd","exports","module","$","window","Array","from","arrayLike","mapFn","thisArg","arr","slice","call","map","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","prototype","Event","Element","matches","msMatchesSelector","NodeList","forEach","callback","i","length","camelise","prop","replace","text","letter","toUpperCase","dasherise","toLowerCase","filterNodes","dabby","filter","context","not","func","nodes","nodeType","isFunction","n","node","item","Boolean","getEvents","getProp","properties","getVal","val","obj","current","setCss","props","value","name","keys","k","remove","Object","style","selector","match","isWindow","readyState","addEventListener","once","indexOf","each","concat","querySelectorAll","push","createElement","attr","innerHTML","content","children","fn","len","ajax","url","settings","extend","method","cache","data","dataType","async","crossDomain","scriptCharset","jsonp","jsonpCallback","Date","now","headers","contentType","statusCode","username","password","test","sync","script","xhr","param","charset","load","error","key","response","complete","apply","src","head","appendChild","status","responseText","callbacks","JSON","parse","e","XMLHttpRequest","open","Authorization","btoa","setRequestHeader","onload","types","ontimeout","onabort","send","success","type","isFunc","getScript","split","uri","html","outerHTML","add","isArr","isArray","encodeURIComponent","join","serialize","is","disabled","getAttribute","events","on","cssText","className","textContent","removeAttribute","setAttribute","cls","substr","classList","css","isPlainObject","getComputedStyle","output","ret","getPropertyValue","temp","dataset","stringify","hasOwnProperty","hasClass","contains","removeProp","multiple","String","selected","values","checked","get","offset","coords","doc","documentElement","rect","pos","parent","getBoundingClientRect","top","left","position","parseFloat","scrollTop","scrollLeft","offsetParent","offsetLeft","offsetTop","getAdditionalLength","wh","suffix","dim","valtype","io","whu","isNaN","Node","DOCUMENT_NODE","trigger","target","t","parents","args","preventDefault","stopPropagation","capture","index","removeEventListener","splice","dispatchEvent","clone","cloneNode","empty","before","prepend","append","after","pre","elems","arguments","arg","backwards","forwards","insertAdjacentElement","insertBefore","prependTo","appendTo","insertAfter","parentNode","removeChild","all","source","replaceChild","start","end","unwrap","wrap","wrapAll","firstElementChild","closest","eq","find","first","has","subject","last","next","until","sibling","ELEMENT_NODE","siblings","child","arrs","merge","sources","shift","assign","constructor","Function","getPrototypeOf","proto","toString","result"],"mappings":"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","file":"dabby.es5.js","sourcesContent":["/*! dabbyjs v0.9.5 by Will Earp - https://github.com/hexydec/dabby */\r\n\r\n(function (global, factory) {\r\n\tif (typeof define === \"function\" && define.amd) {\r\n\t\tdefine(() => factory(global));\r\n\t} else if (typeof exports !== \"undefined\") {\r\n\t\tmodule.exports = factory(global);\r\n\t} else if (!global.$) {\r\n\t\tglobal.$ = factory(global);\r\n\t}\r\n}(this || window, window => {\r\n\t\"use strict\";\r\n\r\nif (!Array.from) {\r\n\tArray.from = function (arrayLike, mapFn, thisArg) {\r\n\t\tvar arr = [].slice.call(arrayLike);\r\n\t\tif (typeof mapFn === \"function\") {\r\n\t\t\tarr = arr.map(mapFn, thisArg);\r\n\t\t}\r\n\t\treturn arr;\r\n\t};\r\n}\r\n\r\n// CustomEvent is not supported in IE11\r\nif (typeof window.CustomEvent !== \"function\") {\r\n\tfunction CustomEvent(event, params) {\r\n\t\tparams = params || {bubbles: false, cancelable: false, detail: undefined};\r\n\t\tconst evt = document.createEvent(\"CustomEvent\");\r\n\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n\t\treturn evt;\r\n\t}\r\n\r\n\tCustomEvent.prototype = window.Event.prototype;\r\n\twindow.CustomEvent = CustomEvent;\r\n}\r\n\r\n// support Element.matches() in IE and older Webkit\r\nif (!Element.prototype.matches) {\r\n    Element.prototype.matches = Element.prototype.msMatchesSelector;\r\n}\r\n\r\nif (!NodeList.prototype.forEach) {\r\n    NodeList.prototype.forEach = function (callback, thisArg) {\r\n        thisArg = thisArg || window;\r\n        for (var i = 0; i < this.length; i++) {\r\n            callback.call(thisArg, this[i], i, this);\r\n        }\r\n    };\r\n}\r\n\r\nfunction camelise(prop) {\r\n\treturn prop.replace(/-([a-z])/gi, (text, letter) => letter.toUpperCase());\r\n}\r\n\r\nfunction dasherise(prop) {\r\n\treturn prop.replace(/[A-Z]/g, (letter) => \"-\" + letter.toLowerCase());\r\n}\r\n\r\nfunction filterNodes(dabby, filter, context, not) {\r\n\tlet func,\r\n\t\tnodes = dabby.nodeType ? [dabby] : Array.from(dabby);\r\n\r\n\t// sort out args\r\n\tif (typeof context === \"boolean\") {\r\n\t\tnot = context;\r\n\t\tcontext = null;\r\n\t}\r\n\r\n\t// function\r\n\tif ($.isFunction(filter)) {\r\n\t\tfunc = filter;\r\n\r\n\t// nodes\r\n\t} else {\r\n\r\n\t\t// normalise filters\r\n\t\tif (typeof(filter) === \"string\") {\r\n\t\t\tfilter = [filter];\r\n\t\t} else {\r\n\t\t\tfilter = Array.from($(filter, context));\r\n\t\t}\r\n\r\n\t\t// filter function\r\n\t\tfunc = (n, node) => {\r\n\t\t\tlet i = filter.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tif (typeof(filter[i]) === \"string\" && node.matches ? node.matches(filter[i]) : node === filter[i]) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t};\r\n\t}\r\n\treturn nodes.filter((item, i) => func.call(item, i, item) !== Boolean(not), nodes);\r\n}\r\n\r\nfunction getEvents() {\r\n\treturn [\"focusin\", \"focusout\", \"focus\", \"blur\", \"resize\", \"scroll\", \"unload\", \"click\", \"dblclick\", \"mousedown\", \"mouseup\", \"mousemove\", \"mouseover\", \"mouseout\", \"mouseenter\", \"mouseleave\", \"contextmenu\", \"change\", \"select\", \"keydown\", \"keypress\", \"keyup\", \"error\", \"submit\"];\r\n}\r\n\r\nfunction getProp(prop) {\r\n\tlet properties = {\r\n\t\t\"for\": \"htmlFor\",\r\n\t\t\"class\": \"className\",\r\n\t\t\"tabindex\": \"tabIndex\",\r\n\t\t\"readonly\": \"readOnly\",\r\n\t\t\"maxlength\": \"maxLength\",\r\n\t\t\"cellspacing\": \"cellSpacing\",\r\n\t\t\"cellpadding\": \"cellPadding\",\r\n\t\t\"rowspan\": \"rowSpan\",\r\n\t\t\"colspan\": \"colSpan\",\r\n\t\t\"usemap\": \"useMap\",\r\n\t\t\"frameborder\": \"frameBorder\",\r\n\t\t\"contenteditable\": \"contentEditable\"\r\n\t};\r\n\tprop = prop.toLowerCase();\r\n\treturn properties[prop] || prop;\r\n}\r\n\r\nfunction getVal(val, obj, i, current) {\r\n\r\n\t// retrieve as function\r\n\tif ($.isFunction(val)) {\r\n\t\tval = val.call(obj, i, $.isFunction(current) ? current() : current); // current can be a function\r\n\t}\r\n\treturn val;\r\n}\r\n\r\nfunction setCss(dabby, props, value) {\r\n\r\n\t// set vars\r\n\tlet name = props,\r\n\t\tkeys,\r\n\t\tk,\r\n\t\tremove;\r\n\r\n\t// normalise props\r\n\tif (typeof props === \"string\") {\r\n\t\tprops = {};\r\n\t\tprops[name] = value;\r\n\t}\r\n\r\n\t// cache properties for loop\r\n\tkeys = Object.keys(props);\r\n\tk = keys.length;\r\n\r\n\t// set properties\r\n\twhile (k--) {\r\n\t\tlet i = dabby.length;\r\n\t\twhile (i--) {\r\n\t\t\tlet val = props[keys[k]] === \"\" ? undefined : getVal(props[keys[k]], dabby[i], k, dabby[i].style[keys[k]]);\r\n\t\t\tif (typeof val === \"number\") {\r\n\t\t\t\tval += \"px\";\r\n\t\t\t}\r\n\t\t\tdabby[i].style[remove ? \"removeProperty\" : \"setProperty\"](dasherise(keys[k]), val);\r\n\t\t}\r\n\t}\r\n\treturn dabby;\r\n}\r\n\r\nconst dabby = function (selector, context) {\r\n\tlet nodes = [],\r\n\t\tmatch,\r\n\t\tobj;\r\n\r\n\t// enables new object to be created through $()\r\n\tif (!(this instanceof dabby)) {\r\n\t\treturn new dabby(selector, context);\r\n\r\n\t// if no selector, return empty colletion\r\n\t} else if (selector) {\r\n\r\n\t\t// $ collection\r\n\t\tif (selector instanceof dabby) {\r\n\t\t\treturn selector;\r\n\r\n\t\t// single node\r\n\t\t} else if (selector.nodeType || $.isWindow(selector)) {\r\n\t\t\tnodes = [selector];\r\n\r\n\t\t// ready function\r\n\t\t} else if ($.isFunction(selector)) {\r\n\t\t\tif (document.readyState !== \"loading\") {\r\n\t\t\t\tselector.call(document, $);\r\n\t\t\t} else {\r\n\t\t\t\tdocument.addEventListener(\"DOMContentLoaded\", () => {selector.call(document, $);}, {once: true});\r\n\t\t\t}\r\n\r\n\t\t// array|NodeList|HTMLCollection of nodes\r\n\t\t} else if (typeof selector !== \"string\") {\r\n\t\t\tnodes = selector;\r\n\r\n\t\t// CSS selector\r\n\t\t} else if (selector.indexOf(\"<\") === -1) {\r\n\t\t\tcontext = context || document;\r\n\t\t\t$(context).each((i, obj) => {\r\n\t\t\t\tnodes = nodes.concat(Array.from(obj.querySelectorAll(selector)));\r\n\t\t\t});\r\n\r\n\t\t// create a single node and attach properties\r\n\t\t} else if ((match = selector.match(/^<([a-z0-9]+)(( ?\\/)?|><\\/\\1)>$/i)) !== null) {\r\n\t\t\tnodes.push(document.createElement(match[1]));\r\n\r\n\t\t\t// context is CSS attributes\r\n\t\t\tif (context instanceof Object) {\r\n\t\t\t\tobj = $(nodes);\r\n\t\t\t\t$.each(context, (prop, value) => {\r\n\t\t\t\t\tobj.attr(prop, value);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t// parse HTML into nodes\r\n\t\t} else {\r\n\t\t\t//nodes = (context || doc).createRange().createContextualFragment(selector).childNodes; // not supported in iOS 9\r\n\t\t\tobj = document.createElement(\"template\");\r\n\t\t\tobj.innerHTML = selector;\r\n\t\t\tnodes = obj.content ? obj.content.children : obj.children;\r\n\t\t}\r\n\t}\r\n\r\n\t// build nodes\r\n\tthis.length = 0;\r\n\tArray.from(nodes).forEach(node => { // HTMLCollection objects don't support forEach\r\n\t\tif ([1, 9, 11].indexOf(node.nodeType) > -1 || $.isWindow(node)) { // only element, document, documentFragment and window\r\n\t\t\tthis[this.length++] = node;\r\n\t\t}\r\n\t});\r\n\treturn this;\r\n},\r\n\t$ = dabby; // alias in this scope\r\n\r\n// alias functions\r\ndabby.fn = dabby.prototype;\r\n\r\n$.each = (obj, callback) => {\r\n\tconst keys = Object.keys(obj),\r\n\t\tlen = keys.length;\r\n\r\n\tfor (let i = 0; i < len; i++) {\r\n\t\tif (callback.call(obj[keys[i]], keys[i], obj[keys[i]]) === false) {\r\n\t\t\tbreak; // stop if callback returns false\r\n\t\t}\r\n\t}\r\n\treturn obj;\r\n};\r\n\r\n$.ajax = (url, settings) => {\r\n\r\n\t// normalise args\r\n\tif (typeof url === \"object\") {\r\n\t\tsettings = url;\r\n\t} else {\r\n\t\tif (typeof settings !== \"object\") {\r\n\t\t\tsettings = {};\r\n\t\t}\r\n\t\tsettings.url = url;\r\n\t}\r\n\r\n\t// set default settings\r\n\tsettings = $.extend({\r\n\t\tmethod: \"GET\",\r\n\t\tcache: null, // start will null so we can see if explicitly set\r\n\t\tdata: null,\r\n\t\tdataType: null, // only changes behavior with json, jsonp, script\r\n\t\tasync: true,\r\n\t\tcrossDomain: false,\r\n\t\tscriptCharset: null,\r\n\t\tjsonp: \"callback\",\r\n\t\tjsonpCallback: \"dabby\" + Date.now(),\r\n\t\theaders: {\r\n\t\t\t\"X-Requested-With\": \"XMLHttpRequest\",\r\n\t\t\t\"Content-Type\": settings.contentType || \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n\t\t},\r\n\t\tcontext: null,\r\n\t\tstatusCode: {},\r\n\t\tusername: null,\r\n\t\tpassword: null\r\n\t}, settings);\r\n\r\n\t// determine datatype\r\n\tif (!settings.dataType && /\\.js($|\\?)/.test(settings.url)) {\r\n\t\tsettings.dataType = \"script\";\r\n\t}\r\n\r\n\tlet sync = [\"script\", \"jsonp\"].indexOf(settings.dataType) > -1,\r\n\t\tscript, xhr, data;\r\n\r\n\t// add data to query string\r\n\tif (settings.data) {\r\n\t\tdata = typeof settings.data === \"string\" ? settings.data : $.param(settings.data);\r\n\t}\r\n\tif (data && settings.method === \"GET\") {\r\n\t\tsettings.url += (settings.url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + data;\r\n\t}\r\n\r\n\t// add cache buster\r\n\tif (settings.cache || (settings.cache === null && sync)) {\r\n\t\tsettings.url += (settings.url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + \"_=\" + (+new Date());\r\n\t}\r\n\r\n\t// fetch script\r\n\tif (sync || settings.crossDomain) {\r\n\t\tscript = document.createElement(\"script\");\r\n\t\tif (settings.scriptCharset) {\r\n\t\t\tscript.charset = settings.scriptCharset;\r\n\t\t}\r\n\r\n\t\t// add callback parameter\r\n\t\tif (settings.dataType === \"jsonp\") {\r\n\t\t\tsettings.url += (settings.url.indexOf(\"?\") > -1 ? \"&\" : \"?\") + settings.jsonp + \"=\" + settings.jsonpCallback;\r\n\t\t}\r\n\r\n\t\t// setup event callbacks\r\n\t\t$.each({\r\n\t\t\tload: \"success\",\r\n\t\t\terror: \"error\"\r\n\t\t}, (key, value) => {\r\n\t\t\tscript.addEventListener(key, () => {\r\n\t\t\t\tlet response = settings.dataType === \"jsonp\" ? window[settings.jsonpCallback] || null : null;\r\n\t\t\t\t[settings[value], settings.complete].forEach(callback => {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(settings.context, callback === settings.complete ? [null, value] : [response, value]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, {once: true});\r\n\t\t});\r\n\r\n\t\tscript.src = settings.url;\r\n\t\tscript.async = settings.async;\r\n\t\tdocument.head.appendChild(script);\r\n\r\n\t// make xhr request\r\n\t} else {\r\n\t\tconst callback = (xhr, status) => {\r\n\t\t\tlet response = xhr.responseText,\r\n\t\t\t\tcallbacks = [];\r\n\r\n\t\t\t// parse JSON\r\n\t\t\tif ([\"json\", null].indexOf(settings.dataType) > -1) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tresponse = JSON.parse(response);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// do nothing\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// run callbacks\r\n\t\t\t[settings.statusCode[xhr.status], settings[status], settings.complete].forEach(callback => {\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback.apply(settings.context, callback === settings.complete ? [xhr, status] : [response, status, xhr]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// create XHR object\r\n\t\txhr = new XMLHttpRequest();\r\n\t\txhr.open(settings.method, settings.url, settings.async);\r\n\r\n\t\t// add authoisation header\r\n\t\tif (settings.username) {\r\n\t\t\tsettings.headers.Authorization = btoa(settings.username + \":\" + settings.password);\r\n\t\t}\r\n\r\n\t\t// headers\r\n\t\t$.each(settings.headers, (key, value) => {\r\n\t\t\txhr.setRequestHeader(key, value);\r\n\t\t});\r\n\r\n\t\t// callbacks\r\n\t\txhr.onload = () => {\r\n\t\t\tconst types = {\r\n\t\t\t\t200: \"success\",\r\n\t\t\t\t204: \"nocontent\",\r\n\t\t\t\t304: \"notmodified\"\r\n\t\t\t};\r\n\t\t\tcallback(xhr, types[xhr.status] || \"error\");\r\n\t\t};\r\n\t\txhr.ontimeout = () => {\r\n\t\t\tcallback(xhr, \"timeout\");\r\n\t\t};\r\n\t\txhr.onabort = () => {\r\n\t\t\tcallback(xhr, \"abort\");\r\n\t\t};\r\n\t\txhr.send(settings.method === \"GET\" ? null : data);\r\n\t\treturn xhr;\r\n\t}\r\n};\r\n\r\n[\"get\", \"post\"].forEach(name => {\r\n\t$[name] = (url, data, success, type) => {\r\n\t\tconst isFunc = $.isFunction(data);\r\n\t\tlet settings = typeof(url) === \"object\" ? url : {\r\n\t\t\turl: url,\r\n\t\t\tdata: isFunc ? {} : data,\r\n\t\t\tsuccess: isFunc ? data : success,\r\n\t\t\tdataType: isFunc ? success : type\r\n\t\t};\r\n\t\tsettings.method = name.toUpperCase();\r\n\t\treturn $.ajax(settings);\r\n\t};\r\n});\r\n\r\n$.getScript = (url, success) => $.ajax({\r\n\turl: url,\r\n\tdataType: \"script\",\r\n\tsuccess: success\r\n});\r\n\r\n$.fn.load = function (url, data, success) {\r\n\tif (this[0]) {\r\n\r\n\t\t// get selector from URL\r\n\t\tconst [uri, selector] = url.split(\" \", 2);\r\n\r\n\t\t// check for data\r\n\t\tif ($.isFunction(data)) {\r\n\t\t\tsuccess = data;\r\n\t\t\tdata = undefined;\r\n\t\t}\r\n\r\n\t\t// make AJAX request\r\n\t\t$.ajax(uri, {\r\n\t\t\tdata: data,\r\n\t\t\ttype: data instanceof Object ? \"POST\" : \"GET\",\r\n\t\t\tsuccess: (response, status, xhr) => {\r\n\r\n\t\t\t\t// if a selector is specified, find it in the returned document\r\n\t\t\t\tlet html = \"\",\r\n\t\t\t\t\ti = this.length;\r\n\r\n\t\t\t\t// refine by selector if supplied\r\n\t\t\t\tif (selector) {\r\n\t\t\t\t\t$(response).filter(selector).each((key, obj) => {\r\n\t\t\t\t\t\thtml += obj.outerHTML;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\thtml = response;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// set HTML to nodes in collection\r\n\t\t\t\twhile (i--) {\r\n\t\t\t\t\tthis[i].innerHTML = html;\r\n\r\n\t\t\t\t\t// fire success callback on nodes\r\n\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\tsuccess.call(this[i], response, status, xhr);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n$.param = obj => {\r\n\tlet params = [],\r\n\t\tadd = (key, value, params) => {\r\n\t\t\tlet isArr = $.isArray(value);\r\n\t\t\tif (isArr || typeof value === \"object\") {\r\n\t\t\t\t$.each(value, (i, val) => {\r\n\t\t\t\t\tparams = add(key + \"[\" + (isArr ? \"\" : i) + \"]\", val, params);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tparams.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(value));\r\n\t\t\t}\r\n\t\t\treturn params;\r\n\t\t};\r\n\r\n\t// process values\r\n\t$.each(obj, (key, item) => {\r\n\t\tparams = add(key, item, params);\r\n\t});\r\n\treturn params.join(\"&\");\r\n};\r\n\r\n$.fn.serialize = function () {\r\n\tconst selector = \"input[name]:not([type=file]):not([type=submit]),textarea[name],select[name]\",\r\n\t\tobj = this.is(selector) ? this.filter(selector) : $(selector, this),\r\n\t\tadd = (name, value, params) => {\r\n\t\t\tlet match;\r\n\r\n\t\t\tif ((match = name.match(/([^\\[]*)\\[([^\\]]*)\\](.*)/)) !== null) {\r\n\t\t\t\tname = match[1];\r\n\t\t\t\tlet arr = add(match[2] + match[3], value, params[name] || {});\r\n\t\t\t\tvalue = arr;\r\n\t\t\t}\r\n\r\n\t\t\tif (name !== \"\") {\r\n\t\t\t\tparams[name] = value;\r\n\t\t\t} else {\r\n\t\t\t\tif (!$.isArray(params)) {\r\n\t\t\t\t\tparams = [];\r\n\t\t\t\t}\r\n\t\t\t\tparams = params.concat($.isArray(value) ? value : [value]);\r\n\t\t\t}\r\n\t\t\treturn params;\r\n\t\t};\r\n\r\n\tlet params = {};\r\n\r\n\t// process values\r\n\tobj.each((key, obj) => {\r\n\t\tconst value = $(obj).val();\r\n\t\tif (!obj.disabled && value !== undefined) {\r\n\t\t\tparams = add(obj.getAttribute(\"name\"), value, params);\r\n\t\t}\r\n\t});\r\n\treturn $.param(params);\r\n};\r\n\r\n$.fn.attr = function (prop, value) {\r\n\tlet isArr = $.isArray(prop),\r\n\t\ti,\r\n\t\tevents,\r\n\t\tarr = {};\r\n\r\n\t// set properties\r\n\tif (isArr || value || value === null) {\r\n\t\ti = this.length,\r\n\t\tevents = getEvents();\r\n\r\n\t\t// normalise to array\r\n\t\tif (!isArr) {\r\n\t\t\tarr[prop] = value;\r\n\t\t\tprop = arr;\r\n\t\t}\r\n\r\n\t\twhile (i--) {\r\n\t\t\t$.each(prop, (key, val) => {\r\n\t\t\t\tif (events.indexOf(key) > -1) {\r\n\t\t\t\t\t$(this[i]).on(key, val);\r\n\t\t\t\t} else if (key === \"style\") {\r\n\t\t\t\t\tthis[i].style.cssText = val;\r\n\t\t\t\t} else if (key === \"class\") {\r\n\t\t\t\t\tthis[i].className = val;\r\n\t\t\t\t} else if (key === \"text\") {\r\n\t\t\t\t\tthis[i].textContent = val;\r\n\t\t\t\t} else if (value === null) {\r\n\t\t\t\t\tthis[i].removeAttribute(key);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis[i].setAttribute(key, val);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// retrieve properties\r\n\t} else if (this[0]) {\r\n\t\tif (prop === \"style\") {\r\n\t\t\treturn this[0].style.cssText;\r\n\t\t}\r\n\t\tif (prop === \"class\") {\r\n\t\t\treturn this[0].className;\r\n\t\t}\r\n\t\treturn this[0].getAttribute(prop);\r\n\t}\r\n};\r\n\r\n[\"addClass\", \"removeClass\", \"toggleClass\"].forEach(name => {\r\n\t$.fn[name] = function (cls) {\r\n\r\n\t\t// remove \"Class\" from name for classList method\r\n\t\tlet func = name.substr(0, name.length - 5),\r\n\t\t\ti = this.length;\r\n\r\n\t\t// manage classes on nodes\r\n\t\twhile (i--) {\r\n\t\t\tlet arr = getVal(cls, this[i], i, this[i].className);\r\n\t\t\tif (typeof arr === \"string\") {\r\n\t\t\t\tarr = arr.split(\" \");\r\n\t\t\t}\r\n\t\t\tconst len = arr.length;\r\n\t\t\tfor (let n = 0; n < len; n++) {\r\n\t\t\t\tthis[i].classList[func](arr[n]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\n\r\n$.fn.css = function (props, value) {\r\n\r\n\t// set the values\r\n\tif (value !== undefined || $.isPlainObject(props)) {\r\n\t\treturn setCss(this, props, value);\r\n\r\n\t// retrieve value from first property\r\n\t} else if (this[0]) {\r\n\t\tlet name = props,\r\n\t\t\ti,\r\n\t\t\tstyle = getComputedStyle(this[0], \"\"),\r\n\t\t\toutput = {},\r\n\t\t\tret = false;\r\n\r\n\t\tif (typeof name === \"string\") {\r\n\t\t\tprops = [name];\r\n\t\t\tret = true;\r\n\t\t}\r\n\t\ti = props.length;\r\n\t\twhile (i--) {\r\n\t\t\toutput[props[i]] = style.getPropertyValue(dasherise(props[i]));\r\n\t\t\tif (ret) {\r\n\t\t\t\treturn output[props[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n};\r\n\r\n$.fn.data = function (name, data) {\r\n\r\n\t// convert data to object\r\n\tif (typeof name === \"object\") {\r\n\t\tdata = name;\r\n\t} else if (data !== undefined) {\r\n\t\tlet temp = {};\r\n\t\ttemp[name] = data;\r\n\t\tdata = temp;\r\n\t}\r\n\r\n\t// set value\r\n\tif (data !== undefined) {\r\n\t\tlet i = this.length;\r\n\t\twhile (i--) {\r\n\t\t\t$.each(data, (key, value) => {\r\n\t\t\t\tthis[i].dataset[camelise(key)] = typeof value === \"object\" ? JSON.stringify(value) : value;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// get value\r\n\t} else if (this[0] && this[0].dataset) {\r\n\t\tlet parse = value => {\r\n\t\t\ttry {\r\n\t\t\t\treturn JSON.parse(value);\r\n\t\t\t} catch (e) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// all properties\r\n\t\tif (name === undefined) {\r\n\t\t\tlet arr = {};\r\n\t\t\t$.each(this[0].dataset, (key, value) => {\r\n\t\t\t\tarr[key] = parse(value);\r\n\t\t\t});\r\n\t\t\treturn arr;\r\n\r\n\t\t// retrieve specific property\r\n\t\t} else {\r\n\t\t\tname = camelise(name);\r\n\t\t\tif (this[0].dataset.hasOwnProperty(name)) {\r\n\t\t\t\treturn parse(this[0].dataset[name]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n$.fn.hasClass = function (cls) {\r\n\tlet i = this.length;\r\n\twhile (i--) {\r\n\t\tif (this[i].classList.contains(cls)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n$.fn.prop = function (prop, value) {\r\n\tprop = getProp(prop);\r\n\r\n\t// set\r\n\tif (value !== undefined) {\r\n\t\tlet i = this.length;\r\n\t\twhile (i--) {\r\n\t\t\tthis[i][prop] = getVal(value, this[i], i, this[i][prop]);\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// get\r\n\t} else if (this[0]) {\r\n\t\treturn this[0][prop];\r\n\t}\r\n};\r\n\r\n$.fn.removeProp = function (prop) {\r\n\tlet i = this.length;\r\n\tprop = getProp(prop);\r\n\r\n\twhile (i--) {\r\n\t\tdelete this[i][prop];\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n$.fn.val = function (value) {\r\n\r\n\t// set value\r\n\tif (value !== undefined) {\r\n\t\tlet i = this.length,\r\n\t\t\tval;\r\n\t\twhile (i--) {\r\n\t\t\tlet val = getVal(value, this[i], i, () => $(this[i]).val());\r\n\t\t\tif (this[i].multiple) {\r\n\t\t\t\tval = $.map($.isArray(val) ? val : [val], item => String(item)); // convert to string\r\n\t\t\t\t$(\"option\", this[i]).each((key, obj) => {\r\n\t\t\t\t\tobj.selected = val.indexOf(String(obj.value)) > -1;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis[i].value = String(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// read value from first node\r\n\t} else if (this[0]) {\r\n\r\n\t\t// get multiple values\r\n\t\tif (this[0].multiple) {\r\n\t\t\tlet values = [];\r\n\t\t\t$(\"option\", this[0]).each((key, obj) => {\r\n\t\t\t\tif (obj.selected) {\r\n\t\t\t\t\tvalues.push(String(obj.value));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn values;\r\n\r\n\t\t// get radio box value\r\n\t\t} else if (this[0].type === \"radio\") {\r\n\t\t\tlet obj = this.filter(\"[name='\" + this[0].name + \"']:checked\")[0];\r\n\t\t\treturn obj ? String(obj.value) : undefined;\r\n\r\n\t\t// get single value\r\n\t\t} else if (this[0].type !== \"checkbox\" || this[0].checked) {\r\n\t\t\treturn String(this[0].value);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n$.fn.each = function (callback) {\r\n\t$.each(Array.from(this), callback);\r\n\treturn this;\r\n};\r\n\r\n$.fn.get = function (i) {\r\n\treturn i === undefined ? Array.from(this) : this[i >= 0 ? i : i + this.length];\r\n};\r\n\r\n$.fn.map = function (callback) {\r\n\tconst len = this.length;\r\n\tlet values = [],\r\n\t\ti = 0;\r\n\r\n\tfor (; i < len; i++) {\r\n\t\tvalues.push(callback.call(this[i], i, this[i]));\r\n\t}\r\n\treturn values;\r\n};\r\n\r\n$.fn.offset = function (coords) {\r\n\tconst doc = document.documentElement;\r\n\tlet rect,\r\n\t\ti = this.length,\r\n\t\tpos,\r\n\t\tparent;\r\n\r\n\t// set\r\n\tif (coords) {\r\n\t\twhile (i--) {\r\n\r\n\t\t\t// if coords is callback, generate value\r\n\t\t\trect = this[i].getBoundingClientRect();\r\n\t\t\tcoords = getVal(coords, this[i], i, rect);\r\n\r\n\t\t\tif (coords.top !== undefined && coords.left !== undefined) {\r\n\r\n\t\t\t\t// set position relative if static\r\n\t\t\t\tpos = this[i].style.position || \"static\";\r\n\t\t\t\tif (pos === \"static\") {\r\n\t\t\t\t\tthis[i].style.position = \"relative\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// set offset\r\n\t\t\t\tthis[i].style.top = (parseFloat(coords.top) - (pos === \"fixed\" ? 0 : doc.scrollTop + rect.top)) + \"px\";\r\n\t\t\t\tthis[i].style.left = (parseFloat(coords.left) - (pos === \"fixed\" ? 0 : doc.scrollLeft + rect.left)) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// get\r\n\t} else if (this[0]) {\r\n\t\tpos = this[0].style.position;\r\n\t\trect = this[0].getBoundingClientRect();\r\n\t\treturn {\r\n\t\t\ttop: rect.top - (pos === \"fixed\" ? 0 : doc.scrollTop),\r\n\t\t\tleft: rect.left - (pos === \"fixed\" ? 0 : doc.scrollLeft)\r\n\t\t};\r\n\t}\r\n};\r\n\r\n$.fn.offsetParent = function () {\r\n\treturn $(this[0] ? this[0].offsetParent : null);\r\n};\r\n\r\n$.fn.position = function () {\r\n\tif (this[0]) {\r\n\t\treturn {left: this[0].offsetLeft, top: this[0].offsetTop};\r\n\t}\r\n};\r\n\r\n[\"scrollLeft\", \"scrollTop\"].forEach(item => {\r\n\t$.fn[item] = function (pos) {\r\n\r\n\t\t// set\r\n\t\tif (pos !== undefined) {\r\n\t\t\tlet i = this.length;\r\n\t\t\twhile (i--) {\r\n\t\t\t\tthis[i][item] = pos;\r\n\t\t\t};\r\n\t\t\treturn this;\r\n\r\n\t\t// get\r\n\t\t} else if (this[0]) {\r\n\t\t\treturn this[0][item];\r\n\t\t}\r\n\t};\r\n});\r\n\r\n[\"width\", \"height\", \"innerWidth\", \"innerHeight\", \"outerWidth\", \"outerHeight\"].forEach(dim => {\r\n\r\n\tconst getAdditionalLength = (obj, wh, props) => {\r\n\t\tconst style = getComputedStyle(obj);\r\n\t\tlet i = props.length,\r\n\t\t\tvalue = 0,\r\n\t\t\tsuffix;\r\n\r\n\t\twhile (i--) {\r\n\t\t\tsuffix = props[i] === \"border\" ? \"-width\" : \"\";\r\n\t\t\tvalue += parseFloat(style.getPropertyValue(props[i] + (wh === \"width\" ? \"-left\" : \"-top\") + suffix)) || 0;\r\n\t\t\tvalue += parseFloat(style.getPropertyValue(props[i] + (wh === \"width\" ? \"-right\" : \"-bottom\") + suffix)) || 0;\r\n\t\t}\r\n\t\treturn value;\r\n\t};\r\n\r\n\t$.fn[dim] = function (val) {\r\n\t\tconst valtype = typeof(val),\r\n\t\t\twh = dim.toLowerCase().indexOf(\"width\") > -1 ? \"width\" : \"height\", // width or height\r\n\t\t\tio = dim.indexOf(\"inner\") > -1 ? \"inner\" : (dim.indexOf(\"outer\") > -1 ? \"outer\" : \"\"); // inner outer or neither\r\n\t\tlet i = this.length,\r\n\t\t\tvalue,\r\n\t\t\twhu,\r\n\t\t\tprops,\r\n\t\t\tparam;\r\n\r\n\t\t// set value\r\n\t\tif (val !== undefined && valtype !== \"boolean\") {\r\n\t\t\twhile (i--) {\r\n\t\t\t\tvalue = getVal(val, this[i], i, this[i][dim]);\r\n\t\t\t\tif (io) {\r\n\t\t\t\t\tprops = [\"padding\"];\r\n\t\t\t\t\tif (io === \"outer\") {\r\n\t\t\t\t\t\tprops.push(\"border\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvalue -= getAdditionalLength(this[i], wh, props);\r\n\t\t\t\t}\r\n\t\t\t\tif (!isNaN(val)) {\r\n\t\t\t\t\tvalue += \"px\";\r\n\t\t\t\t}\r\n\t\t\t\tthis[i].style[wh] = value;\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\r\n\t\t// get value\r\n\t\t} else if (this[0]) {\r\n\t\t\twhu = wh === \"width\" ? \"Width\" : \"Height\";\r\n\r\n\t\t\t// document\r\n\t\t\tif (this[0].nodeType === Node.DOCUMENT_NODE) {\r\n\t\t\t\treturn this[0].documentElement[\"scroll\" + whu];\r\n\r\n\t\t\t// element\r\n\t\t\t} else if (!$.isWindow(this[0])) {\r\n\t\t\t\tparam = io === \"outer\" ? \"offset\" : \"client\";\r\n\t\t\t\tvalue = this[0][param + whu];\r\n\r\n\t\t\t\t// add padding on, or if outer and margins requested, add margins on\r\n\t\t\t\tif (io === \"\" || (io === \"outer\" && val === true)) {\r\n\t\t\t\t\tvalue -= getAdditionalLength(this[0], wh, [io === \"\" ? \"padding\" : \"margin\"]);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t// window\r\n\t\t\t} else if (io === \"inner\") {\r\n\t\t\t\treturn this[0].document.documentElement[\"client\" + whu];\r\n\t\t\t} else {\r\n\t\t\t\treturn this[0][\"inner\" + whu];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});\r\n\r\ngetEvents().forEach(event => {\r\n\t$.fn[event] = function (data, callback) {\r\n\t\treturn data ? this.on(event, data, callback) : this.trigger(event);\r\n\t};\r\n});\r\n\r\n// add and remove event handlers\r\n[\"on\", \"one\", \"off\"].forEach(name => {\r\n\t$.fn[name] = function (events, selector, data, callback) {\r\n\t\tlet i = this.length;\r\n\r\n\t\tevents = events.split(\" \");\r\n\r\n\t\t// sort out args\r\n\t\tif ($.isFunction(selector)) {\r\n\t\t\tcallback = selector;\r\n\t\t\tselector = null;\r\n\t\t} else if ($.isFunction(data)) {\r\n\t\t\tcallback = data;\r\n\t\t\tdata = null;\r\n\t\t}\r\n\r\n\t\t// attach event\r\n\t\twhile (i--) {\r\n\t\t\tlet e = events.length;\r\n\r\n\t\t\t// record the original function\r\n\t\t\tif (name !== \"off\") {\r\n\t\t\t\tif (!this[i].events) {\r\n\t\t\t\t\tthis[i].events = [];\r\n\t\t\t\t}\r\n\t\t\t\tlet fn = function (evt) { // delegate function\r\n\t\t\t\t\tlet target = [this];\r\n\t\t\t\t\tif (selector) {\r\n\t\t\t\t\t\tlet t = $(evt.target);\r\n\t\t\t\t\t\ttarget = t.add(t.parents()).filter(selector).get(); // is the selector in the targets parents?\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tif (data) { // set data to event object\r\n\t\t\t\t\t\t\tevt.data = data;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let i = 0, len = target.length; i < len; i++) {\r\n\t\t\t\t\t\t\tif (callback.call(target[i], evt, evt.args) === false) {\r\n\t\t\t\t\t\t\t\tevt.preventDefault();\r\n\t\t\t\t\t\t\t\tevt.stopPropagation();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tthis[i].events.push({\r\n\t\t\t\t\tevents: events,\r\n\t\t\t\t\tcallback: callback,\r\n\t\t\t\t\tselector: selector,\r\n\t\t\t\t\tfunc: fn,\r\n\t\t\t\t\tonce: name === \"one\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// trigger\r\n\t\t\t\twhile (e--) {\r\n\t\t\t\t\tthis[i].addEventListener(events[e], fn, {once: name === \"one\", capture: !!selector});\r\n\t\t\t\t}\r\n\r\n\t\t\t// find the original function\r\n\t\t\t} else if (this[i].events.length) {\r\n\t\t\t\twhile (e--) {\r\n\t\t\t\t\tthis[i].events.forEach((evt, n) => {\r\n\t\t\t\t\t\tconst index = evt.events.indexOf(events[e]);\r\n\t\t\t\t\t\tif (index !== -1 && evt.callback === callback && evt.selector === selector) {\r\n\t\t\t\t\t\t\tthis[i].removeEventListener(events[e], evt.func, {once: evt.once, capture: !!evt.selector}); // must pass same arguments\r\n\t\t\t\t\t\t\tthis[i].events[n].events.splice(index, 1);\r\n\t\t\t\t\t\t\tif (!this[i].events[n].events.length) {\r\n\t\t\t\t\t\t\t\tthis[i].events.splice(n, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\n\r\n$.fn.trigger = function (name, data) {\r\n\tconst evt = new CustomEvent(name, {bubbles: true, cancelable: true});\r\n\tlet i = this.length;\r\n\r\n\t// copy extra data to event object\r\n\tif (data) {\r\n\t\tevt.args = data;\r\n\t}\r\n\twhile (i--) {\r\n\t\tthis[i].dispatchEvent(evt);\r\n\t\t/*if (this[i].dispatchEvent(evt) && this[i][name]) {\r\n\t\t\tthis[i][name]();\r\n\t\t}*/\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n$.fn.clone = function () {\r\n\tlet nodes = [],\r\n\t\ti = this.length;\r\n\r\n\twhile (i--) {\r\n\t\tnodes[i] = this[i].cloneNode(true);\r\n\t}\r\n\treturn $(nodes);\r\n};\r\n\r\n$.fn.empty = function () {\r\n\tlet i = this.length;\r\n\twhile (i--) {\r\n\t\tthis[i].innerHTML = \"\";\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n$.fn.html = function (html) {\r\n\r\n\t// set\r\n\tif (html !== undefined) {\r\n\t\tlet i = this.length;\r\n\t\twhile (i--) {\r\n\t\t\tthis[i].innerHTML = getVal(html, this[i], i, this[i].innerHTML);\r\n\t\t}\r\n\t\treturn this;\r\n\r\n\t// get\r\n\t} else if (this[0]) {\r\n\t\treturn this[0].innerHTML;\r\n\t}\r\n};\r\n\r\n$.each({\r\n\tbefore: \"beforeBegin\",\r\n\tprepend: \"afterBegin\",\r\n\tappend: \"beforeEnd\",\r\n\tafter: \"afterEnd\"\r\n}, (name, pos) => {\r\n\t$.fn[name] = function (html) {\r\n\t\tconst pre = [\"before\", \"prepend\"].indexOf(name) > -1,\r\n\t\t\tisFunc = $.isFunction(html);\r\n\t\tlet i = this.length,\r\n\t\t\telems = $();\r\n\r\n\t\tif (!isFunc) { // multiple arguments containing nodes?\r\n\t\t\t$.each(arguments, (i, arg) => {\r\n\t\t\t\telems.add(arg);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\twhile (i--) {\r\n\t\t\tif (isFunc) {\r\n\t\t\t\telems = $(getVal(html, this[i], i, this[i].innerHTML));\r\n\t\t\t}\r\n\t\t\tlet backwards = elems.length, // for counting down\r\n\t\t\t\tforwards = -1; // for counting up\r\n\t\t\twhile (pre ? backwards-- : ++forwards < backwards) { // insert forwards or backwards?\r\n\t\t\t\tlet obj = elems[pre ? backwards : forwards];\r\n\r\n\t\t\t\t// clone if i !== 0\r\n\t\t\t\tif (i) {\r\n\t\t\t\t\tobj = obj.cloneNode(true);\r\n\t\t\t\t}\r\n\t\t\t\tthis[i].insertAdjacentElement(pos, obj);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\n\r\n$.each({\r\n\tinsertBefore: \"before\",\r\n\tprependTo: \"prepend\",\r\n\tappendTo: \"append\",\r\n\tinsertAfter: \"after\"\r\n}, (name, func) => {\r\n\t$.fn[name] = function (selector) {\r\n\t\tlet i = this.length,\r\n\t\t\tobj = $(selector);\r\n\r\n\t\twhile (i--) {\r\n\t\t\tobj[func](this[i]);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\n\r\n[\"remove\", \"detach\"].forEach(func => {\r\n\t$.fn[func] = function (selector) {\r\n\t\tlet i = this.length,\r\n\t\t\tnodes = [],\r\n\t\t\tobj = [];\r\n\r\n\t\t// detach selected nodes\r\n\t\twhile (i--) {\r\n\t\t\tif (!selector || filterNodes(this[i], selector).length) {\r\n\t\t\t\tnodes.push(this[i].parentNode.removeChild(this[i]));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// create a new dabby object to return\r\n\t\treturn func === \"detach\" ? $(nodes) : this;\r\n\t};\r\n});\r\n\r\n// needs more understanding of how this is supposed to work!!!\r\n\r\n[\"replaceWith\", \"replaceAll\"].forEach(name => {\r\n\t$.fn[name] = function (html) {\r\n\t\tconst all = name === \"replaceAll\",\r\n\t\t\tsource = all ? $(html) : this;\r\n\t\tlet target = all ? this : html,\r\n\t\t\tisFunc = $.isFunction(target);\r\n\r\n\t\tif (!isFunc) {\r\n\t\t\ttarget = $(target);\r\n\t\t}\r\n\r\n\t\tlet i = source.length;\r\n\r\n\t\twhile (i--) {\r\n\t\t\tlet n = target.length,\r\n\t\t\t\tparent = source[i].parentNode;\r\n\t\t\twhile (n--) {\r\n\t\t\t\tconst replace = isFunc ? getVal(target[n], n, target[n]) : target[n];\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tsource[i].insertAdjacentElement(\"beforebegin\", replace.cloneNode(true));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsource[i] = parent.replaceChild(i ? replace.cloneNode(true) : replace, source[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\n\r\n$.fn.slice = function (start, end) {\r\n\treturn $(this.get().slice(start, end));\r\n};\r\n\r\n$.fn.text = function (text) {\r\n\tconst get = text === undefined;\r\n\tlet len = this.length,\r\n\t\toutput = [],\r\n\t\ti = 0;\r\n\tfor (; i < len; i++) {\r\n\t\tif (get) {\r\n\t\t\toutput.push(this[i].textContent);\r\n\t\t} else {\r\n\t\t\tthis[i].textContent = getVal(text, this[i], i, this[i].textContent);\r\n\t\t}\r\n\t}\r\n\treturn get ? output.join(\" \") : this;\r\n};\r\n\r\n$.fn.unwrap = function (selector) {\r\n\tthis.parent(selector).not(\"body\").each((key, obj) => {\r\n\t\tconst parent = obj.parentNode;\r\n\r\n\t\t$(obj.children).each((i, node) => {\r\n\t\t\tparent.insertBefore(node, obj);\r\n\t\t});\r\n\t\tparent.removeChild(obj);\r\n\t});\r\n\treturn this;\r\n};\r\n\r\n$.fn.wrap = function (html) {\r\n\tlet i = this.length;\r\n\r\n\twhile (i--) {\r\n\t\t$(this[i]).wrapAll(getVal(html, this[i], i));\r\n\t}\r\n\treturn this;\r\n}\r\n\r\n$.fn.wrapAll = function (html) {\r\n\tif (this[0]) {\r\n\r\n\t\t// set variables\r\n\t\tlet len = this.length,\r\n\t\t\ti = 0,\r\n\t\t\tnode = $(getVal(html, this[0]))[0].cloneNode(true);\r\n\r\n\t\t// insert clone into parent\r\n\t\tthis[0].parentNode.insertBefore(node, null);\r\n\r\n\t\t// find innermost child of node\r\n\t\twhile (node.firstElementChild) {\r\n\t\t\tnode = node.firstElementChild;\r\n\t\t}\r\n\r\n\t\t// attach nodes to the new node\r\n\t\tfor (; i < len; i++) {\r\n\t\t\tnode.appendChild(this[i]);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n}\r\n\r\n$.fn.add = function (nodes, context) {\r\n\tnodes = $(nodes, context);\r\n\tlet len = this.length,\r\n\t\ti = nodes.length;\r\n\r\n\tthis.length += i;\r\n\twhile (i--) {\r\n\t\tthis[i + len] = nodes[i];\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n$.fn.children = function (selector) {\r\n\tlet nodes = [],\r\n\t\ti = this.length;\r\n\r\n\twhile (i--) {\r\n\t\tnodes = nodes.concat(Array.from(this[i].children));\r\n\t}\r\n\r\n\t// filter nodes by selector\r\n\tif (selector) {\r\n\t\tnodes = filterNodes(nodes, selector);\r\n\t}\r\n\treturn $(nodes);\r\n};\r\n\r\n$.fn.closest = function (selector, context) {\r\n\tlet i = this.length,\r\n\t\tnodes = [],\r\n\t\tparents,\r\n\t\tnode;\r\n\r\n\twhile (i--) {\r\n\t\tparents = [];\r\n\t\tnode = this[i];\r\n\t\twhile (node) {\r\n\t\t\tparents.push(node);\r\n\t\t\tnode = node.parentNode;\r\n\t\t}\r\n\t\tparents = filterNodes(parents, selector, context);\r\n\t\tif (parents[0]) {\r\n\t\t\tnodes.push(parents[0]);\r\n\t\t}\r\n\t}\r\n\treturn $(nodes);\r\n};\r\n\r\n$.fn.eq = function (i) {\r\n\tlet key = i < 0 ? i + this.length : i;\r\n\treturn $(this[key] || null);\r\n};\r\n\r\n[\"filter\", \"not\"].forEach(name => {\r\n\t$.fn[name] = function (selector) {\r\n\t\treturn $(filterNodes(this, selector, name === \"not\"));\r\n\t};\r\n});\r\n\r\n$.fn.find = function (selector) {\r\n\treturn $(selector, this);\r\n};\r\n\r\n$.fn.first = function () {\r\n\treturn $(this[0]);\r\n};\r\n\r\n$.fn.has = function (selector) {\r\n\treturn $(this.get().filter(node => !!$(selector, node).length));\r\n};\r\n\r\n$.fn.index = function (selector) {\r\n\tlet index = -1;\r\n\r\n\tif (this[0]) {\r\n\t\tlet nodes,\r\n\t\t\tsubject = this[0],\r\n\t\t\ttype = typeof selector,\r\n\t\t\ti;\r\n\r\n\t\t// if no selector, match against first elements siblings\r\n\t\tif (type === \"undefined\") {\r\n\t\t\tnodes = this[0].parentNode.children;\r\n\r\n\t\t// if selector is string, match first node in current collection against resulting collection\r\n\t\t} else if (type === \"string\") {\r\n\t\t\tnodes = $(selector);\r\n\r\n\t\t// if element or collection match the element or first node against current collection\r\n\t\t} else {\r\n\t\t\tnodes = this;\r\n\t\t\tsubject = $(selector)[0];\r\n\t\t}\r\n\r\n\t\ti = nodes.length;\r\n\t\twhile (i--) {\r\n\t\t\tif (nodes[i] === subject) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn index;\r\n};\r\n\r\n$.fn.is = function (selector) {\r\n\treturn !!filterNodes(this, selector).length;\r\n};\r\n\r\n$.fn.last = function () {\r\n\treturn this.eq(-1);\r\n};\r\n\r\n[\"next\", \"nextAll\", \"nextUntil\", \"prev\", \"prevAll\", \"prevUntil\"].forEach(func => {\r\n\t$.fn[func] = function (selector, filter) {\r\n\t\tconst next = func.indexOf(\"next\") > -1,\r\n\t\t\tall = func.indexOf(\"All\") > -1,\r\n\t\t\tuntil = func.indexOf(\"Until\") > -1,\r\n\t\t\tmethod = next ? \"nextElementSibling\" : \"previousElementSibling\";\r\n\t\tlet nodes = [],\r\n\t\t\ti = this.length,\r\n\t\t\tsibling;\r\n\r\n\t\t// look through each node and get siblings\r\n\t\twhile (i--) {\r\n\t\t\tsibling = this[i][method];\r\n\t\t\twhile (sibling) {\r\n\t\t\t\tnodes.push(sibling);\r\n\t\t\t\tif (all || (until && filterNodes(sibling, selector).length)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsibling = sibling[method];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// swap args for *Until methods\r\n\t\tif (until) {\r\n\t\t\tselector = filter;\r\n\t\t}\r\n\r\n\t\t// filter siblings by selector\r\n\t\tif (selector) {\r\n\t\t\tnodes = filterNodes(nodes, selector);\r\n\t\t}\r\n\r\n\t\t// return new collection\r\n\t\treturn $(nodes);\r\n\t};\r\n});\r\n\r\n[\"parent\", \"parents\", \"parentsUntil\"].forEach(func => {\r\n\t$.fn[func] = function (selector, filter) {\r\n\t\tconst all = func.indexOf(\"s\") > -1,\r\n\t\t\tuntil = func.indexOf(\"U\") > -1;\r\n\t\tlet nodes = [],\r\n\t\t\ti = this.length,\r\n\t\t\tparent;\r\n\r\n\t\twhile (i--) {\r\n\t\t\tparent = this[i].parentNode;\r\n\t\t\twhile (parent && parent.nodeType === Node.ELEMENT_NODE) {\r\n\t\t\t\tnodes.push(parent);\r\n\t\t\t\tif (!all || (until && filterNodes(parent, selector).length)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparent = parent.parentNode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (selector) {\r\n\t\t\tnodes = filterNodes(nodes, selector);\r\n\t\t}\r\n\t\treturn $(nodes);\r\n\t}\r\n});\r\n\r\n$.fn.siblings = function (selector) {\r\n\tlet i = this.length,\r\n\t\tnodes = [];\r\n\r\n\twhile (i--) {\r\n\t\tArray.from(this[i].parentNode.children).forEach(child => {\r\n\t\t\tif (child !== this[i]) {\r\n\t\t\t\tnodes.push(child);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\treturn $(selector ? filterNodes(nodes, selector) : nodes);\r\n};\r\n\r\n$.extend = (...arrs) => {\r\n\tif (arrs[0] === true) {\r\n\r\n\t\t// merge function will recursively merge items\r\n\t\tfunction merge(target, ...sources) {\r\n\t\t\tif (sources.length) {\r\n\r\n\t\t\t\t// work on next source\r\n\t\t\t\tconst source = sources.shift();\r\n\t\t\t\tif ($.isPlainObject(target) && $.isPlainObject(source)) {\r\n\r\n\t\t\t\t\t// loop through each property\r\n\t\t\t\t\tconst keys = Object.keys(source),\r\n\t\t\t\t\t\tlen = keys.length;\r\n\t\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\r\n\t\t\t\t\t\t// if target is array, merge, else overwrite with source array\r\n\t\t\t\t\t\t/*if (Array.isArray(source[keys[i]])) {\r\n\t\t\t\t\t\t\ttarget[keys[i]] = Array.isArray(target[keys[i]]) ? Object.assign(target[keys[i]], source[keys[i]]) : source[keys[i]];\r\n\r\n\t\t\t\t\t\t// merge recursively if source is object, if target is not object, overwrite\r\n\t\t\t\t\t\t} else */if ($.isPlainObject(source[keys[i]])) {\r\n\t\t\t\t\t\t\ttarget[keys[i]] = $.isPlainObject(target[keys[i]]) ? merge(target[keys[i]], source[keys[i]]) : source[keys[i]];\r\n\r\n\t\t\t\t\t\t// when source property is value just overwrite\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttarget[keys[i]] = source[keys[i]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// merge next source\r\n\t\t\t    return merge(target, ...sources);\r\n\t\t\t}\r\n\t\t\treturn target;\r\n\t\t}\r\n\r\n\t\treturn merge.apply(null, arrs.slice(1));\r\n\t} else {\r\n\t\treturn Object.assign.apply(null, arrs);\r\n\t}\r\n};\r\n\r\n$.isArray = arr => Array.isArray(arr);\r\n\r\n$.isFunction = func => func && func.constructor === Function;\r\n\r\n$.isPlainObject = obj => {\r\n\t\r\n\t// Basic check for Type object that's not null\r\n\tif (typeof obj === \"object\" && obj !== null) {\r\n\r\n\t\t// If Object.getPrototypeOf supported, use it\r\n\t    if (typeof Object.getPrototypeOf == 'function') {\r\n\t\t\tlet proto = Object.getPrototypeOf(obj);\r\n\t\t\treturn proto === Object.prototype || proto === null;\r\n\t    }\r\n\r\n\t    // Otherwise, use internal class\r\n\t    // This should be reliable as if getPrototypeOf not supported, is pre-ES5\r\n\t\treturn Object.prototype.toString.call(obj) === \"[object Object]\";\r\n \t}\r\n\r\n \t// Not an object\r\n\treturn false;\r\n};\r\n\r\n$.isWindow = obj => obj !== null && obj === obj.window;\r\n\r\n$.map = (obj, callback) => {\r\n\tconst keys = Object.keys(obj),\r\n\t\tlen = keys.length;\r\n\tlet arr = [],\r\n\t\ti = 0,\r\n\t\tresult;\r\n\r\n\tfor (; i < len; i++) {\r\n\t\tresult = callback.call(window, obj[keys[i]], keys[i])\r\n\t\tif (![null, undefined].indexOf(result) > -1) {\r\n\t\t\tarr.push(result);\r\n\t\t}\r\n\t}\r\n\treturn arr;\r\n};\r\nreturn dabby;}));\n//# sourceMappingURL=dabby.es5.js.map"]}